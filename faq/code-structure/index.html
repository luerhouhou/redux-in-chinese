<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-faq/code-structure">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66122997-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M7SNC3FDW9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-M7SNC3FDW9",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Redux 中文官网" href="/opensearch.xml"><title data-rh="true">Code Structure | Redux 中文官网</title><meta data-rh="true" property="og:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-rh="true" name="twitter:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-rh="true" property="og:url" content="http://cn.redux.js.org/faq/code-structure"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Code Structure | Redux 中文官网"><meta data-rh="true" name="description" content="Table of Contents"><meta data-rh="true" property="og:description" content="Table of Contents"><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="http://cn.redux.js.org/faq/code-structure"><link data-rh="true" rel="alternate" href="http://cn.redux.js.org/faq/code-structure" hreflang="en"><link data-rh="true" rel="alternate" href="http://cn.redux.js.org/faq/code-structure" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f2db9367.css">
<link rel="preload" href="/assets/js/runtime~main.d4659145.js" as="script">
<link rel="preload" href="/assets/js/main.770d8f43.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Redux 中文官网</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction/getting-started">入门</a><a class="navbar__item navbar__link" href="/tutorials/essentials/part-1-overview-concepts">教程</a><a class="navbar__item navbar__link" href="/api/api-reference">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/faq">常见问题</a><a class="navbar__item navbar__link" href="/style-guide/style-guide">最佳实践</a><a href="https://www.github.com/nefe/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">源码<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/nefe/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">纠错</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/introduction/getting-started">简介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/tutorials/index">教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/usage/">使用指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/understanding/thinking-in-redux/motivation">深入理解 Redux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/faq">常见问题</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq">FAQ Index</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/general">General</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/reducers">Reducers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/organizing-state">Organizing State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/store-setup">Store Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/actions">Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/immutable-data">Immutable Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/faq/code-structure">Code Structure</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/performance">Performance</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/design-decisions">Design Decisions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/react-redux">React Redux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq/miscellaneous">Miscellaneous</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/style-guide/">编码规范</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/api-reference">API 文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/redux-toolkit/overview">Redux Toolkit</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">常见问题</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Code Structure</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Redux FAQ: Code Structure</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="table-of-contents">Table of Contents<a class="hash-link" href="#table-of-contents" title="Direct link to heading">​</a></h2><ul><li><a href="#what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go">What should my file structure look like? How should I group my action creators and reducers in my project? Where should my selectors go?</a></li><li><a href="#how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go">How should I split my logic between reducers and action creators? Where should my “business logic” go?</a></li><li><a href="#why-should-i-use-action-creators">Why should I use action creators?</a></li><li><a href="#where-should-websockets-and-other-persistent-connections-live">Where should websockets and other persistent connections live?</a></li><li><a href="#how-can-i-use-the-redux-store-in-non-component-files">How can I use the Redux store in non-component files?</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go">What should my file structure look like? How should I group my action creators and reducers in my project? Where should my selectors go?<a class="hash-link" href="#what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go" title="Direct link to heading">​</a></h2><p>Since Redux is just a data store library, it has no direct opinion on how your project should be structured. However, there are a few common patterns that most Redux developers tend to use:</p><ul><li>Rails-style: separate folders for “actions”, “constants”, “reducers”, “containers”, and “components”</li><li>&quot;Feature folders&quot; / &quot;Domain&quot;-style : separate folders per feature or domain, possibly with sub-folders per file type</li><li>“Ducks/Slices”: similar to domain style, but explicitly tying together actions and reducers, often by defining them in the same file</li></ul><p>It&#x27;s generally suggested that selectors are defined alongside reducers and exported, and then reused elsewhere (such as in <code>mapStateToProps</code> functions, in async action creators, or sagas) to colocate all the code that knows about the actual shape of the state tree in the reducer files.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p><strong>We specifically recommend organizing your logic into &quot;feature folders&quot;, with all the Redux logic for a given feature in a single &quot;slice/ducks&quot; file&quot;</strong>.</p><p>See this section for an example:</p><details class="detailed-explanation"><summary><h4>Detailed Explanation: Example Folder Structure</h4></summary>An example folder structure might look something like:<ul><li><code>/src</code><ul><li><code>index.tsx</code>: Entry point file that renders the React component tree</li><li><code>/app</code><ul><li><code>store.ts</code>: store setup</li><li><code>rootReducer.ts</code>: root reducer (optional)</li><li><code>App.tsx</code>: root React component</li></ul></li><li><code>/common</code>: hooks, generic components, utils, etc</li><li><code>/features</code>: contains all &quot;feature folders&quot;<ul><li><code>/todos</code>: a single feature folder<ul><li><code>todosSlice.ts</code>: Redux reducer logic and associated actions</li><li><code>Todos.tsx</code>: a React component</li></ul></li></ul></li></ul></li></ul><p><code>/app</code> contains app-wide setup and layout that depends on all the other folders.</p><p><code>/common</code> contains truly generic and reusable utilities and components.</p><p><code>/features</code> has folders that contain all functionality related to a specific feature. In this example, <code>todosSlice.ts</code> is a &quot;duck&quot;-style file that contains a call to RTK&#x27;s <code>createSlice()</code> function, and exports the slice reducer and action creators.</p></details></div></div><p>While it ultimately doesn&#x27;t matter how you lay out your code on disk, it&#x27;s important to remember that actions and reducers should not be considered in isolation. It&#x27;s entirely possible (and encouraged) for a reducer defined in one folder to respond to an action defined in another folder.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="further-information">Further information<a class="hash-link" href="#further-information" title="Direct link to heading">​</a></h4><p><strong>Documentation</strong></p><ul><li><a href="/style-guide/##structure-files-as-feature-folders-with-single-file-logic">Style Guide: Structure Files as Feature Folders with Single-File Logic</a></li><li><a href="/tutorials/essentials/part-2-app-structure">Redux Essentials tutorial: App Structure</a></li><li><a href="/faq/actions#actions-reducer-mappings">FAQ: Actions - &quot;1:1 mapping between reducers and actions?&quot;</a></li></ul><p><strong>Articles</strong></p><ul><li><a href="https://www.smashingmagazine.com/2016/09/how-to-scale-react-applications/" target="_blank" rel="noopener noreferrer">How to Scale React Applications</a> (accompanying talk: <a href="https://vimeo.com/168648012" target="_blank" rel="noopener noreferrer">Scaling React Applications</a>)</li><li><a href="https://medium.com/lexical-labs-engineering/redux-best-practices-64d59775802e" target="_blank" rel="noopener noreferrer">Redux Best Practices</a></li><li><a href="http://jaysoo.ca/2016/02/28/organizing-redux-application/" target="_blank" rel="noopener noreferrer">Rules For Structuring (Redux) Applications </a></li><li><a href="https://marmelab.com/blog/2015/12/17/react-directory-structure.html" target="_blank" rel="noopener noreferrer">A Better File Structure for React/Redux Applications</a></li><li><a href="http://engineering.kapost.com/2016/01/organizing-large-react-applications/" target="_blank" rel="noopener noreferrer">Organizing Large React Applications</a></li><li><a href="https://medium.com/@msandin/strategies-for-organizing-code-2c9d690b6f33" target="_blank" rel="noopener noreferrer">Four Strategies for Organizing Code</a></li><li><a href="https://randycoulman.com/blog/2016/09/13/encapsulating-the-redux-state-tree/" target="_blank" rel="noopener noreferrer">Encapsulating the Redux State Tree</a></li><li><a href="https://randycoulman.com/blog/2016/09/20/redux-reducer-selector-asymmetry/" target="_blank" rel="noopener noreferrer">Redux Reducer/Selector Asymmetry</a></li><li><a href="https://randycoulman.com/blog/2016/09/27/modular-reducers-and-selectors/" target="_blank" rel="noopener noreferrer">Modular Reducers and Selectors</a></li><li><a href="https://medium.com/@mmazzarolo/my-journey-toward-a-maintainable-project-structure-for-react-redux-b05dfd999b5" target="_blank" rel="noopener noreferrer">My journey towards a maintainable project structure for React/Redux</a></li><li><a href="https://github.com/markerikson/react-redux-links/blob/master/react-redux-architecture.md#project-file-structure" target="_blank" rel="noopener noreferrer">React/Redux Links: Architecture - Project File Structure</a></li></ul><p><strong>Discussions</strong></p><ul><li><a href="https://github.com/reduxjs/redux/issues/839" target="_blank" rel="noopener noreferrer">#839: Emphasize defining selectors alongside reducers</a></li><li><a href="https://github.com/reduxjs/redux/issues/943" target="_blank" rel="noopener noreferrer">#943: Reducer querying</a></li><li><a href="https://github.com/mxstbr/react-boilerplate/issues/27" target="_blank" rel="noopener noreferrer">React Boilerplate #27: Application Structure</a></li><li><a href="https://stackoverflow.com/questions/32634320/how-to-structure-redux-components-containers/32921576" target="_blank" rel="noopener noreferrer">Stack Overflow: How to structure Redux components/containers</a></li><li><a href="https://twitter.com/dan_abramov/status/783428282666614784" target="_blank" rel="noopener noreferrer">Twitter: There is no ultimate file structure for Redux</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go">How should I split my logic between reducers and action creators? Where should my “business logic” go?<a class="hash-link" href="#how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go" title="Direct link to heading">​</a></h2><p>There&#x27;s no single clear answer to exactly what pieces of logic should go in a reducer or an action creator. Some developers prefer to have “fat” action creators, with “thin” reducers that simply take the data in an action and blindly merge it into the corresponding state. Others try to emphasize keeping actions as small as possible, and minimize the usage of <code>getState()</code> in an action creator. (For purposes of this question, other async approaches such as sagas and observables fall in the &quot;action creator&quot; category.)</p><p>There are several potential benefits from putting more logic into your reducers. It&#x27;s likely that the action types would be more semantic and more meaningful (such as <code>&quot;USER_UPDATED&quot;</code> instead of <code>&quot;SET_STATE&quot;</code>). In addition, having more logic in reducers means that more functionality will be affected by time travel debugging.</p><p>This comment sums up the dichotomy nicely:</p><blockquote><p>Now, the problem is what to put in the action creator and what in the reducer, the choice between fat and thin action objects. If you put all the logic in the action creator, you end up with fat action objects that basically declare the updates to the state. Reducers become pure, dumb, add-this, remove that, update these functions. They will be easy to compose. But not much of your business logic will be there.
If you put more logic in the reducer, you end up with nice, thin action objects, most of your data logic in one place, but your reducers are harder to compose since you might need info from other branches. You end up with large reducers or reducers that take additional arguments from higher up in the state.</p></blockquote><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p><strong>We recommend putting as much logic as possible into reducers</strong>. There are times when you may need some logic to help prepare what goes into the action, but reducers should do most of the work.</p></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="further-information-1">Further information<a class="hash-link" href="#further-information-1" title="Direct link to heading">​</a></h4><p><strong>Documentation</strong></p><ul><li><a href="/style-guide/#put-as-much-logic-as-possible-in-reducers">Style Guide: Put as Much Logic as Possible in Reducers</a></li><li><a href="/style-guide/#model-actions-as-events-not-setters">Style Guide: Model Actions as &quot;Events&quot;, not &quot;Setters&quot;</a></li></ul><p><strong>Articles</strong></p><ul><li><a href="https://medium.com/@jeffbski/where-do-i-put-my-business-logic-in-a-react-redux-application-9253ef91ce1" target="_blank" rel="noopener noreferrer">Where do I put my business logic in a React/Redux application?</a></li><li><a href="https://www.smashingmagazine.com/2016/09/how-to-scale-react-applications/" target="_blank" rel="noopener noreferrer">How to Scale React Applications</a></li><li><a href="https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-2/#thick-and-thin-reducers" target="_blank" rel="noopener noreferrer">The Tao of Redux, Part 2 - Practice and Philosophy. Thick and thin reducers.</a></li></ul><p><strong>Discussions</strong></p><ul><li><a href="https://github.com/reduxjs/redux/issues/384#issuecomment-127393209" target="_blank" rel="noopener noreferrer">How putting too much logic in action creators could affect debugging</a></li><li><a href="https://github.com/reduxjs/redux/issues/384#issuecomment-127393209" target="_blank" rel="noopener noreferrer">#384: The more that&#x27;s in a reducer, the more you can replay via time travel</a></li><li><a href="https://github.com/reduxjs/redux/issues/1165" target="_blank" rel="noopener noreferrer">#1165: Where to put business logic / validation?</a></li><li><a href="https://github.com/reduxjs/redux/issues/1171" target="_blank" rel="noopener noreferrer">#1171: Recommendations for best practices regarding action-creators, reducers, and selectors</a></li><li><a href="https://stackoverflow.com/questions/35667249/accessing-redux-state-in-an-action-creator/35674575" target="_blank" rel="noopener noreferrer">Stack Overflow: Accessing Redux state in an action creator?</a></li><li><a href="https://github.com/reduxjs/redux/issues/2796#issue-289298280" target="_blank" rel="noopener noreferrer">#2796: Gaining clarity on &quot;business logic&quot;</a></li><li><a href="https://twitter.com/FwardPhoenix/status/952971237004926977" target="_blank" rel="noopener noreferrer">Twitter: Moving away from unclear terminology...</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="why-should-i-use-action-creators">Why should I use action creators?<a class="hash-link" href="#why-should-i-use-action-creators" title="Direct link to heading">​</a></h2><p>Redux does not require action creators. You are free to create actions in any way that is best for you, including simply passing an object literal to <code>dispatch</code>. Action creators emerged from the <a href="https://facebook.github.io/react/blog/2014/07/30/flux-actions-and-the-dispatcher.html#actions-and-actioncreators" target="_blank" rel="noopener noreferrer">Flux architecture</a> and have been adopted by the Redux community because they offer several benefits.</p><p>Action creators are more maintainable. Updates to an action can be made in one place and applied everywhere. All instances of an action are guaranteed to have the same shape and the same default values.</p><p>Action creators are testable. The correctness of an inline action must be verified manually. Like any function, tests for an action creator can be written once and run automatically.</p><p>Action creators are easier to document. The action creator&#x27;s parameters enumerate the action&#x27;s dependencies. And centralization of the action definition provides a convenient place for documentation comments. When actions are written inline, this information is harder to capture and communicate.</p><p>Action creators are a more powerful abstraction. Creating an action often involves transforming data or making AJAX requests. Action creators provide a uniform interface to this varied logic. This abstraction frees a component to dispatch an action without being complicated by the details of that action&#x27;s creation.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="further-information-2">Further information<a class="hash-link" href="#further-information-2" title="Direct link to heading">​</a></h4><p><strong>Articles</strong></p><ul><li><a href="https://blog.isquaredsoftware.com/2016/10/idiomatic-redux-why-use-action-creators/" target="_blank" rel="noopener noreferrer">Idiomatic Redux: Why use action creators?</a></li></ul><p><strong>Discussions</strong></p><ul><li><a href="https://www.reddit.com/r/reactjs/comments/54k8js/redbox_redux_action_creation_made_simple/d8493z1/?context=4" target="_blank" rel="noopener noreferrer">Reddit: Redbox - Redux action creation made simple</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="where-should-websockets-and-other-persistent-connections-live">Where should websockets and other persistent connections live?<a class="hash-link" href="#where-should-websockets-and-other-persistent-connections-live" title="Direct link to heading">​</a></h2><p>Middleware are the right place for persistent connections like websockets in a Redux app, for several reasons:</p><ul><li>Middleware exist for the lifetime of the application</li><li>Like with the store itself, you probably only need a single instance of a given connection that the whole app can use</li><li>Middleware can see all dispatched actions and dispatch actions themselves. This means a middleware can take dispatched actions and turn those into messages sent over the websocket, and dispatch new actions when a message is received over the websocket.</li><li>A websocket connection instance isn&#x27;t serializable, so <a href="/faq/organizing-state#organizing-state-non-serializable">it doesn&#x27;t belong in the store state itself</a></li></ul><p>See <a href="https://gist.github.com/markerikson/3df1cf5abbac57820a20059287b4be58" target="_blank" rel="noopener noreferrer">this example that shows how a socket middleware might dispatch and respond to Redux actions</a>.</p><p>There&#x27;s many existing middleware for websockets and other similar connections - see the link below.</p><p><strong>Libraries</strong></p><ul><li><a href="https://github.com/markerikson/redux-ecosystem-links/blob/master/middleware-sockets-adapters.md" target="_blank" rel="noopener noreferrer">Middleware: Socket and Adapters</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-can-i-use-the-redux-store-in-non-component-files">How can I use the Redux store in non-component files?<a class="hash-link" href="#how-can-i-use-the-redux-store-in-non-component-files" title="Direct link to heading">​</a></h2><p>There should only be a single Redux store per application. This makes it effectively a singleton in terms of the app architecture. When used with React, the store is injected into the components at runtime by rendering a <code>&lt;Provider store={store}&gt;</code> around the root <code>&lt;App&gt;</code> component, so only the application setup logic needs to import the store directly.</p><p>However, there may be times when other parts of the codebase need to interact with the store as well.</p><p><strong>You should avoid importing the store directly into other codebase files</strong>. While it may work in some cases, that often ends up causing circular import dependency errors.</p><p>Some possible solutions are:</p><ul><li>Write your store-dependent logic as a thunk, and then dispatch that thunk from a component</li><li>Pass along references to <code>dispatch</code> from components as arguments the relevant functions</li><li>Write the logic as middleware and add them to the store at setup time</li><li>Inject the store instance into the relevant files as the app is being created.</li></ul><p>One common use case is reading API authorization information such as a token from the Redux state, inside of an Axios interceptor. The interceptor file needs to reference <code>store.getState()</code>, but also needs to be imported into API layer files, and this leads to circular imports.</p><p>You can expose an <code>injectStore</code> function from the interceptor file instead:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">common/api.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">let</span><span class="token plain"> store</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">injectStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">_store</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  store </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> _store</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">axiosInstance</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">interceptors</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">use</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token parameter">config</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    config</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">authorization</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">getState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">auth</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> config</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then, in your entry point file, inject the store into the API setup file:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockTitle_Ktv7">index.js</div><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">store</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;./app/store&quot;</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports">injectStore</span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;./common/api&quot;</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#E6D874">injectStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">store</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This way, the application setup is the only code that has to import the store, and the file dependency graph avoids circular dependencies.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/faq/immutable-data"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Immutable Data</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/faq/performance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Performance</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#table-of-contents" class="table-of-contents__link toc-highlight">Table of Contents</a></li><li><a href="#what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go" class="table-of-contents__link toc-highlight">What should my file structure look like? How should I group my action creators and reducers in my project? Where should my selectors go?</a></li><li><a href="#how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go" class="table-of-contents__link toc-highlight">How should I split my logic between reducers and action creators? Where should my “business logic” go?</a></li><li><a href="#why-should-i-use-action-creators" class="table-of-contents__link toc-highlight">Why should I use action creators?</a></li><li><a href="#where-should-websockets-and-other-persistent-connections-live" class="table-of-contents__link toc-highlight">Where should websockets and other persistent connections live?</a></li><li><a href="#how-can-i-use-the-redux-store-in-non-component-files" class="table-of-contents__link toc-highlight">How can I use the Redux store in non-component files?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started">入门</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/essentials/part-1-overview-concepts">教程</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">常见问题</a></li><li class="footer__item"><a class="footer__link-item" href="/api/api-reference">API 文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nefe/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2015–2022 Dan Abramov and Cam Song.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d4659145.js"></script>
<script src="/assets/js/main.770d8f43.js"></script>
</body>
</html>