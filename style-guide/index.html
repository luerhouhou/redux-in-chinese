<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-style-guide/style-guide">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66122997-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-M7SNC3FDW9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-M7SNC3FDW9",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Redux 中文官网" href="/opensearch.xml"><title data-rh="true">风格引导 | Redux 中文官网</title><meta data-rh="true" property="og:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-rh="true" name="twitter:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-rh="true" property="og:url" content="http://cn.redux.js.org/style-guide/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="风格引导 | Redux 中文官网"><meta data-rh="true" name="description" content="Redux风格引导：Redux的推荐使用方法和最佳实践"><meta data-rh="true" property="og:description" content="Redux风格引导：Redux的推荐使用方法和最佳实践"><link data-rh="true" rel="icon" href="/img/favicon/favicon.ico"><link data-rh="true" rel="canonical" href="http://cn.redux.js.org/style-guide/"><link data-rh="true" rel="alternate" href="http://cn.redux.js.org/style-guide/" hreflang="en"><link data-rh="true" rel="alternate" href="http://cn.redux.js.org/style-guide/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f2db9367.css">
<link rel="preload" href="/assets/js/runtime~main.61752c2f.js" as="script">
<link rel="preload" href="/assets/js/main.7ecee670.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Redux 中文官网</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction/getting-started">入门</a><a class="navbar__item navbar__link" href="/tutorials/essentials/part-1-overview-concepts">教程</a><a class="navbar__item navbar__link" href="/api/api-reference">API</a><a class="navbar__item navbar__link" href="/faq">常见问题</a><a class="navbar__item navbar__link" href="/style-guide/style-guide">最佳实践</a><a href="https://www.github.com/nefe/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">源码<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/nefe/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">纠错</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/introduction/getting-started">简介</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/tutorials/index">教程</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/usage/">使用指南</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/understanding/thinking-in-redux/motivation">深入理解 Redux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/faq">常见问题</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/style-guide/">编码规范</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/style-guide/">风格引导: 最佳实践</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/api/api-reference">API 文档</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/redux-toolkit/overview">Redux Toolkit</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">编码规范</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">风格引导: 最佳实践</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="style-guide"><h1>Redux 风格引导</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="引言">引言<a class="hash-link" href="#引言" title="Direct link to heading">​</a></h2><p>这篇文章为你编写 Redux 代码提供官方的风格指导。<strong>列出我们推荐的模式, 最佳实践, 以及编写 Redux 应用的推荐方法。</strong></p><p>Redux 核心库和绝大多数的 Redux 文档都是无观点的（unopinionated）。使用 Redux 有很多种方法，而且很多时候根本就没有唯一“正确”的方法。</p><p>然而，经过时间和实践的证明，一些方法就是比其他的方法更优越。此外，很多开发者也要求我们提供官方引导，从而减少决策的疲劳。</p><p>基于以上背景, <strong>我们将这些推荐写法都列出来，让你避免出现错误、将精力放在非业务代码身上，以及避免不满足规范的代码</strong>。我们也知道团队的编码偏好是多种多样的，且不同的项目有不同的需求，根本就没有一种风格指导能满足所有情况。<strong>我们推荐你遵循这些推荐，但你也需要评估这些场景是否适用于你的需求</strong>。</p><p>最后，我们感谢 Vue 文档的作者，因为受到<a href="https://vuejs.org/v2/style-guide/" target="_blank" rel="noopener noreferrer">Vue Style Guide page</a>的启发，才有了我们这篇文章。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="规则分类">规则分类<a class="hash-link" href="#规则分类" title="Direct link to heading">​</a></h2><p>我们将规则分为以下三类：</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="优先级-a必要">优先级 A：必要<a class="hash-link" href="#优先级-a必要" title="Direct link to heading">​</a></h3><p><strong>这一级别的规则可以防止错误，所以要不计成本地遵守</strong>。例外情况可能存在，但应该非常罕见，并且只能由具备 JavaScript 和 Redux 专业知识的开发者产生。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="优先级-b强烈推荐">优先级 B：强烈推荐<a class="hash-link" href="#优先级-b强烈推荐" title="Direct link to heading">​</a></h3><p>这些规则在绝大多数的项目中都提高了代码可读性和开发体验。即使违反这些规则，代码仍然能运行，但仅能在极少数情况，有很正当理由的时候再去违反这些规则。<strong>只要合理，请尽可能遵守这些规则</strong>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="优先级-c推荐">优先级 C：推荐<a class="hash-link" href="#优先级-c推荐" title="Direct link to heading">​</a></h3><p>你可以选择这些同样优秀选择中的任意一种来保证一致性。在这些规则中，<strong>我们介绍了每个每种规则并推荐了一个默认选项</strong>。这意味着你可以在代码库中自由地做出不同的选择，只要保持一致性并有充分的理由。但是，请慎重！</p><div class="priority-rules priority-essential"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-级优先规则-必要">A 级优先规则: 必要<a class="hash-link" href="#a-级优先规则-必要" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="不要修改-state">不要修改 State<a class="hash-link" href="#不要修改-state" title="Direct link to heading">​</a></h3><p>修改 state 是 Redux 应用 bug 的最常见的诱因，包括组件没有正确再渲染，且阻止了 Redux DevTools 的时间穿梭调试。无论是 reducers 中还是任意其他应用代码中，<strong>都要始终避免 state 的真实变换</strong>。</p><p>请使用类似于<a href="https://github.com/leoasis/redux-immutable-state-invariant" target="_blank" rel="noopener noreferrer"><code>redux-immutable-state-invariant</code></a> 的工具在开发中捕获，并使用<a href="https://immerjs.github.io/immer/" target="_blank" rel="noopener noreferrer">Immer</a>库来避免偶然的 state 更新.</p><blockquote><p><strong>注意</strong>：修改已有值的 <em>副本</em> 是没问题的——这是一种朴素的 immutable 更新方式。 同样的， 如果我们使用了 Immer 库做 immutable 更新， 编写 &quot;mutating&quot; 逻辑也是允许的，因为真实的数据没有被修改—— Immer 在内部进行了安全的变化追踪并且生成了新的 immutably 值。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reducers-不能产生副作用">Reducers 不能产生副作用<a class="hash-link" href="#reducers-不能产生副作用" title="Direct link to heading">​</a></h3><p>Reducer 函数必须<em>只</em> 依赖于 <code>state</code> 和 <code>action</code> 参数，且必须重新计算并返回一个新的 state。<strong>其中禁止执行任何异步代码（AJAX 调用, timeouts, promises），生成随机值 （<code>Date.now()</code>, <code>Math.random()</code>，在 reducer 外面修改变量，或者执行一些修改 reducer 函数作用于之外变量的代码</strong>。</p><blockquote><p><strong>注意</strong>：只要符合同样的规则，在 reducer 中调用外部定义的一些方法，比如从库或工具类中 import 的函数等，也是可以的。</p></blockquote><details class="detailed-explanation"><summary><h4>详细说明</h4></summary><p>此规则的目的是确保在调用时 reducers 的行为可预测。例如，如果你正在进行时间旅行调试，则可能会多次调用 reducer 函数，并根据之前的 actions 生成“当前”状态值。如果 reducer 有副作用，这将导致在调试过程中产生了这些副作用，并导致应用程序以意料之外的方式运行。</p><p>这条规则也有一些灰色地带。严格来说，有一些代码也是副作用，比如 <code>console.log(state)</code>，但是实际上它对应用程序没有实质行的行为。</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="不要把不可序列化的值放进-state-或-action">不要把不可序列化的值放进 State 或 Action<a class="hash-link" href="#不要把不可序列化的值放进-state-或-action" title="Direct link to heading">​</a></h3><p><strong>不要把不可序列化的值放进 Redux store 或者 dispatch 的 actions，比如 Promises、Symbols、Maps/Sets、functions、或类的实例</strong>。这一点保证 Redux DevTools 按照预期方式工作。也保证 UI 按照预期方式更新。</p><blockquote><p><strong>例外</strong>：有时你也可以将非可序列化数据放进 action <em>当且仅当</em> 该 action 在传递到 reducer 之前会被 Middleware 拦截住并不继续向下传递。<code>redux-thunk</code> 和 <code>redux-promise</code> 就是个例子。</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="一个应用只有一个-redux-store">一个应用只有一个 Redux Store<a class="hash-link" href="#一个应用只有一个-redux-store" title="Direct link to heading">​</a></h3><p><strong>一个标准的 Redux 应用应有且仅有一个 Store 实例（单例），供整个应用使用</strong>。它应该用一个单独的文件比如<code>store.js</code>定义出来。</p><p>理想情况下，不应该有任意一个应用逻辑将其直接引入。他应该使用通过<code>&lt;Provider&gt;</code> 传递给 React 组件树，或通过 thunks 这样的 middlewares 间接引用。在极少数的用例中，你可能需要将其导入其他逻辑文件，但这应该是没有办法的办法。</p></div><div class="priority-rules priority-stronglyrecommended"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="a-级优先规则-强烈推荐">A 级优先规则: 强烈推荐<a class="hash-link" href="#a-级优先规则-强烈推荐" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="在写-redux-逻辑时使用-redux-toolkit">在写 Redux 逻辑时使用 Redux Toolkit<a class="hash-link" href="#在写-redux-逻辑时使用-redux-toolkit" title="Direct link to heading">​</a></h3><p><strong><a href="/redux-toolkit/overview">Redux Toolkit</a> 是我们推荐的 Redux 工具集</strong>。它囊括了一些封装可我们最佳实践的方法，包括设置 store 使其能捕获 mutations 并激活 Redux DevTools 拓展，使用 Immer 简化 immutable 更新等等。</p><p>写 Redux 的时候也不是必须要使用 RTK，如果愿意的话你也可以用一些其他的方法，但是<strong>使用 RTK 会简化代码逻辑，并确保应用程序遵循好的 Redux 默认行为</strong>。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-immer-做-immutable-更新">使用 Immer 做 Immutable 更新<a class="hash-link" href="#使用-immer-做-immutable-更新" title="Direct link to heading">​</a></h3><p>手写 immutable 更新逻辑通常比较复杂，却容易出错。<a href="https://immerjs.github.io/immer/" target="_blank" rel="noopener noreferrer">Immer</a>库可以让你写“可变”更新逻辑来简化 immutable 更新，即便在应用开发的其他任意地方为了捕捉 mutation 而 freeze 了 state。</p><p><strong>我们建议使用 Immer 编写 immutable 更新逻辑，这一点已经作为了 <a href="/redux-toolkit/overview">Redux Toolkit</a> 偏好的一部分</strong>。</p><a id="structure-files-as-feature-folders-or-ducks"></a><h3 class="anchor anchorWithStickyNavbar_LWe7" id="将文件结构构造为具有单文件逻辑的功能性文件夹">将文件结构构造为具有单文件逻辑的功能性文件夹<a class="hash-link" href="#将文件结构构造为具有单文件逻辑的功能性文件夹" title="Direct link to heading">​</a></h3><p>Redux 本身并不关心应用的目录结构怎么组织。但是，按照一定规则将 Redux 逻辑收归到一处使得代码更可维护。</p><p>正因如此，<strong>我们建议大多数的应用程序因该按照“功能性文件夹”的方法来组织目录结构</strong>（即具有统一功能的文件都在一个文件夹里）。给定一个特定文件夹，<strong>有相对应功能的 Redux 逻辑 都应该被写进单独的一个 &quot;slice&quot; 文件</strong>，推荐使用 Redux Toolkit 的 <code>createSlice</code> API。（这也是俗称的 <a href="https://github.com/erikras/ducks-modular-redux" target="_blank" rel="noopener noreferrer">&quot;ducks&quot; 模式</a>）。虽然一些老的 Redux 代码库经常使用一种 &quot;folder-by-type&quot; 方式，将“actions”和“reducers”分别写到不同的文件夹中，但是将相关逻辑都归到一起使得定位代码和修改代码变得更容易。</p><details class="detailed-explanation"><summary><h4>详细说明：目录结构的示例</h4></summary>一个目录结构的示例，大概长这样：<ul><li><code>/src</code><ul><li><code>index.tsx</code>: React 组件树渲染的入口文件</li><li><code>/app</code><ul><li><code>store.ts</code>: store 配置</li><li><code>rootReducer.ts</code>: 根 reducer (可选)</li><li><code>App.tsx</code>: React 根组件</li></ul></li><li><code>/common</code>: hooks、通用组件、工具方法等</li><li><code>/features</code>: 包含所有的“功能性文件夹”<ul><li><code>/todos</code>: 但个功能的文件夹<ul><li><code>todosSlice.ts</code>: Redux reducer 逻辑和相关的 action</li><li><code>Todos.tsx</code>: 一个 React 组件</li></ul></li></ul></li></ul></li></ul><p><code>/app</code> 包含应用级别的一些配置和布局等，这些配置和布局取决于项目中的其他文件夹</p><p><code>/common</code> 包含真正通用和可重用的工具方法和组件</p><p><code>/features</code> 是一个存放包含一个特定功能所有的相关方法的文件夹。在本例中，<code>todosSlice.ts</code> 就是一个&quot;duck&quot; 风格的文件，其中包含了 RTK 的 <code>createSlice()</code> 函数的调用，并导出了 slice reducer 和 action creators。</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="尽可能的把逻辑放进-reducers">尽可能的把逻辑放进 Reducers<a class="hash-link" href="#尽可能的把逻辑放进-reducers" title="Direct link to heading">​</a></h3><p>尽可能<strong>试着将计算新的 state 的逻辑代码写进合适的 reducer，而不是准备数据并 dispatch action 的那段代码中</strong>（比如 click handler）。这一点有助于确保更多实际应用程序逻辑易于测试，使得时间旅行调试更高效，更帮助避免导致 mutation 和 bug 的一般性错误。</p><p>存在一些合理的用例，新的 state 中的某些或全部数据需要被首先计算（例如生成唯一的 ID），但是这种情况应该维持在一个最低的限度。</p><details class="detailed-explanation"><summary><h4>详细说明</h4></summary><p>Redux 核心实际上并不关心新的 state 是在 reducer 中计算的还是在 action 创建逻辑中计算的。例如，对于 todo 应用程序，“切换 todo 状态”操作的逻辑要求 immutable 更新 todo 数组。让 action 只携带 todo ID 并在 reducer 中计算新数组是是合法的：</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// Click handler:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">onTodoClicked</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">id</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;todos/toggleTodo&quot;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">id</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Reducer:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;todos/toggleTodo&quot;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!==</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todo</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>并且，首先计算出一个新的数组，并将整个数组放进 action 中也是可以的：</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// Click handler:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">onTodoClicked</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token parameter">id</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> newTodos </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> todos</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token method function property-access" style="color:#E6D874">map</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!==</span><span class="token plain"> id</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> todo</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">completed</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">!</span><span class="token plain">todo</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">completed</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;todos/toggleTodo&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">todos</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> newTodos </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Reducer:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;todos/toggleTodo&quot;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">todos</span><span class="token punctuation" style="color:#F8F8F2">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>但是，我们推荐在 reducer 中完成这些逻辑，有以下几点原因：</p><ul><li>由于 reducer 都是纯函数，所以他们更容易测试 —— 你只需要调用 <code>const result = reducer(testState, action)</code>，并且断言你期望的结果。所以，在 reducer 中执行的逻辑越多，可测试的逻辑就越多。</li><li>Redux state 的更新必须始终遵守<a href="/usage/structuring-reducers/immutable-update-patterns">immutable 更新的原则</a>。大多数的 Redux 使用者都明白在 reducer 中遵循这些规则，但也可能不知道如果要在 reducer 的 <em>外部</em> 计算出一个新的 state <em>也</em> 必须这么干。这样很容易产生错误，比如意外的 mutation 或者甚至从 Redux store 中读取一个值并将其直接回传到 action 中。在 reducer 中执行所有的 state 计算 能避免造成这些错误。</li><li>如果你正在使用 Redux Toolkit 或 Immer 库，那么在 reducers 编写 immutable 更新逻辑 是相当简单的，并且 Immer 会 freeze 掉 state 从而捕获意外的 mutations 错误。</li><li>时间旅行调试让你可以 &quot;撤销&quot; 已经被 dispatch 的 action，且可以 &quot;重做&quot; dispatch action。此外，reducers 的热重载通常涉及到使用新的 reducer 来执行现有的 action。 如果你的 action 没问题但是 reducer 是有 bug 的，你可以修改 recuder 修复 bug，并热重载这个 reducer，你就能获得一个正确的新 state。如果 action 本身出现错误，你只需要重新执行产生错误的那一步的 action。所以，将更多的逻辑放进 reducer 后，调试也变方便了。</li><li>最后，把更新数据的逻辑放进 reducers 而不是让它们随机散落在应用代码的其他地方意味着你更方便找到这些逻辑了。</li></ul></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="reducers-应该拥有-state-shape">Reducers 应该拥有 State Shape<a class="hash-link" href="#reducers-应该拥有-state-shape" title="Direct link to heading">​</a></h3><p>Redux 根 state 是被单一的根 reducer 函数持有和计算的。从可维护性的角度，reducer 会被按照键/值对的形式划分为一个个 &quot;slice&quot;，<strong>每个 &quot;slice reducer&quot; 都负责初始化值且计算和更新 slice state 值</strong>。</p><p>此外，slice reducers should exercise control over what other values are returned as part of the calculated state. <strong>Minimize the use of &quot;blind spreads/returns&quot;</strong> like <code>return action.payload</code> or <code>return {...state, ...action.payload}</code>, because those rely on the code that dispatched the action to correctly format the contents, and the reducer effectively gives up its ownership of what that state looks like. That can lead to bugs if the action contents are not correct.</p><blockquote><p><strong>Note</strong>: A &quot;spread return&quot; reducer may be a reasonable choice for scenarios like editing data in a form, where writing a separate action type for each individual field would be time-consuming and of little benefit.</p></blockquote><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary>Picture a &quot;current user&quot; reducer that looks like:<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">firstName</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#F92672">null</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">lastName</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#F92672">null</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">age</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#F92672">null</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">default</span><span class="token plain"> usersReducer </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> initialState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;users/userLoggedIn&quot;</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, the reducer completely assumes that <code>action.payload</code> is going to be a correctly formatted object.</p><p>However, imagine if some part of the code were to dispatch a &quot;todo&quot; object inside the action, instead of a &quot;user&quot; object:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;users/userLoggedIn&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">id</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">42</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">text</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;Buy milk&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The reducer would blindly return the todo, and now the rest of the app would likely break when it tries to read the user from the store.</p><p>This could be at least partly fixed if the reducer has some validation checks to ensure that <code>action.payload</code> actually has the right fields, or tries to read the right fields out by name. That does add more code, though, so it&#x27;s a question of trading off more code for safety.</p><p>Use of static typing does make this kind of code safer and somewhat more acceptable. If the reducer knows that <code>action</code> is a <code>PayloadAction&lt;User&gt;</code>, then it <em>should</em> be safe to do <code>return action.payload</code>.</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name-state-slices-based-on-the-stored-data">Name State Slices Based On the Stored Data<a class="hash-link" href="#name-state-slices-based-on-the-stored-data" title="Direct link to heading">​</a></h3><p>As mentioned in <a href="#reducers-should-own-the-state-shape">Reducers Should Own the State Shape </a>, the standard approach for splitting reducer logic is based on &quot;slices&quot; of state. Correspondingly, <code>combineReducers</code> is the standard function for joining those slice reducers into a larger reducer function.</p><p>The key names in the object passed to <code>combineReducers</code> will define the names of the keys in the resulting state object. Be sure to name these keys after the data that is kept inside, and avoid use of the word &quot;reducer&quot; in the key names. Your object should look like <code>{users: {}, posts: {}}</code>, rather than <code>{usersReducer: {}, postsReducer: {}}</code>.</p><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary>ES6 object literal shorthand makes it easy to define a key name and a value in an object at the same time:<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> data </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">42</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> obj </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// same as: {data: data}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>combineReducers</code> accepts an object full of reducer functions, and uses that to generate state objects that have the same key names. This means that the key names in the functions object define the key names in the state object.</p><p>This results in a common mistake, where a reducer is imported using &quot;reducer&quot; in the variable name, and then passed to <code>combineReducers</code> using the object literal shorthand:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">usersReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;features/users/usersSlice&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> rootReducer </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">combineReducers</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  usersReducer</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this case, use of the object literal shorthand created an object like <code>{usersReducer: usersReducer}</code>. So, &quot;reducer&quot; is now in the state key name. This is redundant and useless.</p><p>Instead, define key names that only relate to the data inside. We suggest using explicit <code>key: value</code> syntax for clarity:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">usersReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;features/users/usersSlice&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports">postsReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;features/posts/postsSlice&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> rootReducer </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">combineReducers</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">users</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> usersReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">posts</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> postsReducer</span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>It&#x27;s a bit more typing, but it results in the most understandable code and state definition.</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="organize-state-structure-based-on-data-types-not-components">Organize State Structure Based on Data Types, Not Components<a class="hash-link" href="#organize-state-structure-based-on-data-types-not-components" title="Direct link to heading">​</a></h3><p>Root state slices should be defined and named based on the major data types or areas of functionality in your application, not based on which specific components you have in your UI. This is because there is not a strict 1:1 correlation between data in the Redux store and components in the UI, and many components may need to access the same data. Think of the state tree as a sort of global database that any part of the app can access to read just the pieces of state needed in that component.</p><p>For example, a blogging app might need to track who is logged in, information on authors and posts, and perhaps some info on what screen is active. A good state structure might look like <code>{auth, posts, users, ui}</code>. A bad structure would be something like <code>{loginScreen, usersList, postsList}</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="treat-reducers-as-state-machines">Treat Reducers as State Machines<a class="hash-link" href="#treat-reducers-as-state-machines" title="Direct link to heading">​</a></h3><p>Many Redux reducers are written &quot;unconditionally&quot;. They only look at the dispatched action and calculate a new state value, without basing any of the logic on what the current state might be. This can cause bugs, as some actions may not be &quot;valid&quot; conceptually at certain times depending on the rest of the app logic. For example, a &quot;request succeeded&quot; action should only have a new value calculated if the state says that it&#x27;s already &quot;loading&quot;, or an &quot;update this item&quot; action should only be dispatched if there is an item marked as &quot;being edited&quot;.</p><p>To fix this, <strong>treat reducers as &quot;state machines&quot;, where the combination of both the current state <em>and</em> the dispatched action determines whether a new state value is actually calculated</strong>, not just the action itself unconditionally.</p><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary><p>A <a href="https://en.wikipedia.org/wiki/Finite-state_machine" target="_blank" rel="noopener noreferrer">finite state machine</a> is a useful way of modeling something that should only be in one of a finite number of &quot;finite states&quot; at any time. For example, if you have a <code>fetchUserReducer</code>, the finite states can be:</p><ul><li><code>&quot;idle&quot;</code> (fetching not started yet)</li><li><code>&quot;loading&quot;</code> (currently fetching the user)</li><li><code>&quot;success&quot;</code> (user fetched successfully)</li><li><code>&quot;failure&quot;</code> (user failed to fetch)</li></ul><p>To make these finite states clear and <a href="https://kentcdodds.com/blog/make-impossible-states-impossible" target="_blank" rel="noopener noreferrer">make impossible states impossible</a>, you can specify a property that holds this finite state:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialUserState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token comment" style="color:#c6cad2">// explicit finite state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">user</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#F92672">null</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">error</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#F92672">null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With TypeScript, this also makes it easy to use <a href="https://basarat.gitbook.io/typescript/type-system/discriminated-unions" target="_blank" rel="noopener noreferrer">discriminated unions</a> to represent each finite state. For instance, if <code>state.status === &#x27;success&#x27;</code>, then you would expect <code>state.user</code> to be defined and wouldn&#x27;t expect <code>state.error</code> to be truthy. You can enforce this with types.</p><p>Typically, reducer logic is written by taking the action into account first. When modeling logic with state machines, it&#x27;s important to take the state into account first. Creating &quot;finite state reducers&quot; for each state helps encapsulate behavior per state:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token keyword module" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token constant" style="color:#F92672">FETCH_USER</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./actions&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">IDLE_STATUS</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;idle&#x27;</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">LOADING_STATUS</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;loading&#x27;</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">SUCCESS_STATUS</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;success&#x27;</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">FAILURE_STATUS</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;failure&#x27;</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">fetchIdleUserReducer</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// state.status is &quot;idle&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">FETCH_USER</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token spread operator" style="color:#F8F8F2">...</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">status</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">LOADING_STATUS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// ... other reducers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">fetchUserReducer</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#F8F8F2">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#F92672">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">status</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">IDLE_STATUS</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchIdleUserReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">LOADING_STATUS</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchLoadingUserReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">SUCCESS_STATUS</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchSuccessUserReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">case</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">FAILURE_STATUS</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetchFailureUserReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword module" style="color:#F92672">default</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// this should never be reached</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#F92672">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Now, since you&#x27;re defining behavior per state instead of per action, you also prevent impossible transitions. For instance, a <code>FETCH_USER</code> action should have no effect when <code>status === LOADING_STATUS</code>, and you can enforce that, instead of accidentally introducing edge-cases.</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="normalize-complex-nestedrelational-state">Normalize Complex Nested/Relational State<a class="hash-link" href="#normalize-complex-nestedrelational-state" title="Direct link to heading">​</a></h3><p>Many applications need to cache complex data in the store. That data is often received in a nested form from an API, or has relations between different entities in the data (such as a blog that contains Users, Posts, and Comments).</p><p><strong>Prefer storing that data in <a href="/usage/structuring-reducers/normalizing-state-shape">a &quot;normalized&quot; form</a> in the store</strong>. This makes it easier to look up items based on their ID and update a single item in the store, and ultimately leads to better performance patterns.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="keep-state-minimal-and-derive-additional-values">Keep State Minimal and Derive Additional Values<a class="hash-link" href="#keep-state-minimal-and-derive-additional-values" title="Direct link to heading">​</a></h3><p>Whenever possible, <strong>keep the actual data in the Redux store as minimal as possible, and <em>derive</em> additional values from that state as needed</strong>. This includes things like calculating filtered lists or summing up values. As an example, a todo app would keep an original list of todo objects in state, but derive a filtered list of todos outside the state whenever the state is updated. Similarly, a check for whether all todos have been completed, or number of todos remaining, can be calculated outside the store as well.</p><p>This has several benefits:</p><ul><li>The actual state is easier to read</li><li>Less logic is needed to calculate those additional values and keep them in sync with the rest of the data</li><li>The original state is still there as a reference and isn&#x27;t being replaced</li></ul><p>Deriving data is often done in &quot;selector&quot; functions, which can encapsulate the logic for doing the derived data calculations. In order to improve performance, these selectors can be <em>memoized</em> to cache previous results, using libraries like <code>reselect</code> and <code>proxy-memoize</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="model-actions-as-events-not-setters">Model Actions as Events, Not Setters<a class="hash-link" href="#model-actions-as-events-not-setters" title="Direct link to heading">​</a></h3><p>Redux does not care what the contents of the <code>action.type</code> field are - it just has to be defined. It is legal to write action types in present tense (<code>&quot;users/update&quot;</code>), past tense (<code>&quot;users/updated&quot;</code>), described as an event (<code>&quot;upload/progress&quot;</code>), or treated as a &quot;setter&quot; (<code>&quot;users/setUserName&quot;</code>). It is up to you to determine what a given action means in your application, and how you model those actions.</p><p>However, <strong>we recommend trying to treat actions more as &quot;describing events that occurred&quot;, rather than &quot;setters&quot;</strong>. Treating actions as &quot;events&quot; generally leads to more meaningful action names, fewer total actions being dispatched, and a more meaningful action log history. Writing &quot;setters&quot; often results in too many individual action types, too many dispatches, and an action log that is less meaningful.</p><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary>Imagine you&#x27;ve got a restaurant app, and someone orders a pizza and a bottle of Coke.  You could dispatch an action like:<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;food/orderAdded&quot;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain">  </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token literal-property property" style="color:#F92672">pizza</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token literal-property property" style="color:#F92672">coke</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Or you could dispatch:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#f8f8f2;--prism-background-color:#272822"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#f8f8f2"><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;orders/setPizzasOrdered&quot;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">amount</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">getState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">orders</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">pizza</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&quot;orders/setCokesOrdered&quot;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token literal-property property" style="color:#F92672">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token literal-property property" style="color:#F92672">amount</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">getState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">orders</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">coke</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The first example would be an &quot;event&quot;. &quot;Hey, someone ordered a pizza and a pop, deal with it somehow&quot;.</p><p>The second example is a &quot;setter&quot;. &quot;I <em>know</em> there are fields for &#x27;pizzas ordered&#x27; and &#x27;pops ordered&#x27;, and I am commanding you to set their current values to these numbers&quot;.</p><p>The &quot;event&quot; approach only really needed a single action to be dispatched, and it&#x27;s more flexible. It doesn&#x27;t matter how many pizzas were already ordered. Maybe there&#x27;s no cooks available, so the order gets ignored.</p><p>With the &quot;setter&quot; approach, the client code needed to know more about what the actual structure of the state is, what the &quot;right&quot; values should be, and ended up actually having to dispatch multiple actions to finish the &quot;transaction&quot;.</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-meaningful-action-names">Write Meaningful Action Names<a class="hash-link" href="#write-meaningful-action-names" title="Direct link to heading">​</a></h3><p>The <code>action.type</code> field serves two main purposes:</p><ul><li>Reducer logic checks the action type to see if this action should be handled to calculate a new state</li><li>Action types are shown in the Redux DevTools history log for you to read</li></ul><p>Per <a href="#model-actions-as-events-not-setters">Model Actions as &quot;Events&quot;</a>, the actual contents of the <code>type</code> field do not matter to Redux itself. However, the <code>type</code> value <em>does</em> matter to you, the developer. <strong>Actions should be written with meaningful, informative, descriptive type fields</strong>. Ideally, you should be able to read through a list of dispatched action types, and have a good understanding of what happened in the application without even looking at the contents of each action. Avoid using very generic action names like <code>&quot;SET_DATA&quot;</code> or <code>&quot;UPDATE_STORE&quot;</code>, as they don&#x27;t provide meaningful information on what happened.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="allow-many-reducers-to-respond-to-the-same-action">Allow Many Reducers to Respond to the Same Action<a class="hash-link" href="#allow-many-reducers-to-respond-to-the-same-action" title="Direct link to heading">​</a></h3><p>Redux reducer logic is intended to be split into many smaller reducers, each independently updating their own portion of the state tree, and all composed back together to form the root reducer function. When a given action is dispatched, it might be handled by all, some, or none of the reducers.</p><p>As part of this, you are encouraged to <strong>have many reducer functions all handle the same action separately</strong> if possible. In practice, experience has shown that most actions are typically only handled by a single reducer function, which is fine. But, modeling actions as &quot;events&quot; and allowing many reducers to respond to those actions will typically allow your application&#x27;s codebase to scale better, and minimize the number of times you need to dispatch multiple actions to accomplish one meaningful update.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-dispatching-many-actions-sequentially">Avoid Dispatching Many Actions Sequentially<a class="hash-link" href="#avoid-dispatching-many-actions-sequentially" title="Direct link to heading">​</a></h3><p><strong>Avoid dispatching many actions in a row to accomplish a larger conceptual &quot;transaction&quot;</strong>. This is legal, but will usually result in multiple relatively expensive UI updates, and some of the intermediate states could be potentially invalid by other parts of the application logic. Prefer dispatching a single &quot;event&quot;-type action that results in all of the appropriate state updates at once, or consider use of action batching addons to dispatch multiple actions with only a single UI update at the end.</p><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary>There is no limit on how many actions you can dispatch in a row.  However, each dispatched action does result in execution of all store subscription callbacks (typically one or more per Redux-connected UI component), and will usually result in UI updates.<p>While UI updates queued from React event handlers will usually be batched into a single React render pass, updates queued <em>outside</em> of those event handlers are not. This includes dispatches from most <code>async</code> functions, timeout callbacks, and non-React code. In those situations, each dispatch will result in a complete synchronous React render pass before the dispatch is done, which will decrease performance.</p><p>In addition, multiple dispatches that are conceptually part of a larger &quot;transaction&quot;-style update sequence will result in intermediate states that might not be considered valid. For example, if actions <code>&quot;UPDATE_A&quot;</code>, <code>&quot;UPDATE_B&quot;</code>, and <code>&quot;UPDATE_C&quot;</code> are dispatched in a row, and some code is expecting all three of <code>a</code>, <code>b</code>, and <code>c</code> to be updated together, the state after the first two dispatches will effectively be incomplete because only one or two of them has been updated.</p><p>If multiple dispatches are truly necessary, consider batching the updates in some way. Depending on your use case, this may just be batching React&#x27;s own renders (possibly using <a href="https://react-redux.js.org/api/batch" target="_blank" rel="noopener noreferrer"><code>batch()</code> from React-Redux</a>), debouncing the store notification callbacks, or grouping many actions into a larger single dispatch that only results in one subscriber notification. See <a href="/faq/performance#how-can-i-reduce-the-number-of-store-update-events">the FAQ entry on &quot;reducing store update events&quot;</a> for additional examples and links to related addons.</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="evaluate-where-each-piece-of-state-should-live">Evaluate Where Each Piece of State Should Live<a class="hash-link" href="#evaluate-where-each-piece-of-state-should-live" title="Direct link to heading">​</a></h3><p>The <a href="/understanding/thinking-in-redux/three-principles">&quot;Three Principles of Redux&quot;</a> says that &quot;the state of your whole application is stored in a single tree&quot;. This phrasing has been over-interpreted. It does not mean that literally <em>every</em> value in the entire app <em>must</em> be kept in the Redux store. Instead, <strong>there should be a single place to find all values that <em>you</em> consider to be global and app-wide</strong>. Values that are &quot;local&quot; should generally be kept in the nearest UI component instead.</p><p>Because of this, it is up to you as a developer to decide what state should actually live in the Redux store, and what should stay in component state. <strong><a href="/faq/organizing-state#do-i-have-to-put-all-my-state-into-redux-should-i-ever-use-reacts-setstate">Use these rules of thumb to help evaluate each piece of state and decide where it should live</a></strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-react-redux-hooks-api">Use the React-Redux Hooks API<a class="hash-link" href="#use-the-react-redux-hooks-api" title="Direct link to heading">​</a></h3><p><strong>Prefer using <a href="https://react-redux.js.org/api/hooks" target="_blank" rel="noopener noreferrer">the React-Redux hooks API (<code>useSelector</code> and <code>useDispatch</code>)</a> as the default way to interact with a Redux store from your React components</strong>. While the classic <code>connect</code> API still works fine and will continue to be supported, the hooks API is generally easier to use in several ways. The hooks have less indirection, less code to write, and are simpler to use with TypeScript than <code>connect</code> is.</p><p>The hooks API does introduce some different tradeoffs than <code>connect</code> does in terms of performance and data flow, but we now recommend them as the default.</p><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary><p>The <a href="https://react-redux.js.org/api/connect" target="_blank" rel="noopener noreferrer">classic <code>connect</code> API</a> is a <a href="https://reactjs.org/docs/higher-order-components.html" target="_blank" rel="noopener noreferrer">Higher Order Component</a>. It generates a new wrapper component that subscribes to the store, renders your own component, and passes down data from the store and action creators as props.</p><p>This is a deliberate level of indirection, and allows you to write &quot;presentational&quot;-style components that receive all their values as props, without being specifically dependent on Redux.</p><p>The introduction of hooks has changed how most React developers write their components. While the &quot;container/presentational&quot; concept is still valid, hooks push you to write components that are responsible for requesting their own data internally by calling an appropriate hook. This leads to different approaches in how we write and test components and logic.</p><p>The indirection of <code>connect</code> has always made it a bit difficult for some users to follow the data flow. In addition, <code>connect</code>&#x27;s complexity has made it very difficult to type correctly with TypeScript, due to the multiple overloads, optional parameters, merging of props from <code>mapState</code> / <code>mapDispatch</code> / parent component, and binding of action creators and thunks.</p><p><code>useSelector</code> and <code>useDispatch</code> eliminate the indirection, so it&#x27;s much more clear how your own component is interacting with Redux. Since <code>useSelector</code> just accepts a single selector, it&#x27;s much easier to define with TypeScript, and the same goes for <code>useDispatch</code>.</p><p>For more details, see Redux maintainer Mark Erikson&#x27;s post and conference talk on the tradeoffs between hooks and HOCs:</p><ul><li><a href="https://blog.isquaredsoftware.com/2019/07/blogged-answers-thoughts-on-hooks/" target="_blank" rel="noopener noreferrer">Thoughts on React Hooks, Redux, and Separation of Concerns</a></li><li><a href="https://blog.isquaredsoftware.com/2019/09/presentation-hooks-hocs-tradeoffs/" target="_blank" rel="noopener noreferrer">ReactBoston 2019: Hooks, HOCs, and Tradeoffs</a></li></ul><p>Also see the <a href="https://react-redux.js.org/api/hooks" target="_blank" rel="noopener noreferrer">React-Redux hooks API docs</a> for info on how to correctly optimize components and handle rare edge cases.</p></details><h3 class="anchor anchorWithStickyNavbar_LWe7" id="connect-more-components-to-read-data-from-the-store">Connect More Components to Read Data from the Store<a class="hash-link" href="#connect-more-components-to-read-data-from-the-store" title="Direct link to heading">​</a></h3><p>Prefer having more UI components subscribed to the Redux store and reading data at a more granular level. This typically leads to better UI performance, as fewer components will need to render when a given piece of state changes.</p><p>For example, rather than just connecting a <code>&lt;UserList&gt;</code> component and reading the entire array of users, have <code>&lt;UserList&gt;</code> retrieve a list of all user IDs, render list items as <code>&lt;UserListItem userId={userId}&gt;</code>, and have <code>&lt;UserListItem&gt;</code> be connected and extract its own user entry from the store.</p><p>This applies for both the React-Redux <code>connect()</code> API and the <code>useSelector()</code> hook.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-object-shorthand-form-of-mapdispatch-with-connect">Use the Object Shorthand Form of <code>mapDispatch</code> with <code>connect</code><a class="hash-link" href="#use-the-object-shorthand-form-of-mapdispatch-with-connect" title="Direct link to heading">​</a></h3><p>The <code>mapDispatch</code> argument to <code>connect</code> can be defined as either a function that receives <code>dispatch</code> as an argument, or an object containing action creators. <strong>We recommend always using <a href="https://react-redux.js.org/using-react-redux/connect-mapdispatch#defining-mapdispatchtoprops-as-an-object" target="_blank" rel="noopener noreferrer">the &quot;object shorthand&quot; form of <code>mapDispatch</code></a></strong>, as it simplifies the code considerably. There is almost never a real need to write <code>mapDispatch</code> as a function.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="call-useselector-multiple-times-in-function-components">Call <code>useSelector</code> Multiple Times in Function Components<a class="hash-link" href="#call-useselector-multiple-times-in-function-components" title="Direct link to heading">​</a></h3><p><strong>When retrieving data using the <code>useSelector</code> hook, prefer calling <code>useSelector</code> many times and retrieving smaller amounts of data, instead of having a single larger <code>useSelector</code> call that returns multiple results in an object</strong>. Unlike <code>mapState</code>, <code>useSelector</code> is not required to return an object, and having selectors read smaller values means it is less likely that a given state change will cause this component to render.</p><p>However, try to find an appropriate balance of granularity. If a single component does need all fields in a slice of the state , just write one <code>useSelector</code> that returns that whole slice instead of separate selectors for each individual field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-static-typing">Use Static Typing<a class="hash-link" href="#use-static-typing" title="Direct link to heading">​</a></h3><p><strong>Use a static type system like TypeScript or Flow rather than plain JavaScript</strong>. The type systems will catch many common mistakes, improve the documentation of your code, and ultimately lead to better long-term maintainability. While Redux and React-Redux were originally designed with plain JS in mind, both work well with TS and Flow. Redux Toolkit is specifically written in TS and is designed to provide good type safety with a minimal amount of additional type declarations.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-the-redux-devtools-extension-for-debugging">Use the Redux DevTools Extension for Debugging<a class="hash-link" href="#use-the-redux-devtools-extension-for-debugging" title="Direct link to heading">​</a></h3><p><strong>Configure your Redux store to enable <a href="https://github.com/reduxjs/redux-devtools/tree/main/extension" target="_blank" rel="noopener noreferrer">debugging with the Redux DevTools Extension</a></strong>. It allows you to view:</p><ul><li>The history log of dispatched actions</li><li>The contents of each action</li><li>The final state after an action was dispatched</li><li>The diff in the state after an action</li><li>The <a href="https://github.com/reduxjs/redux-devtools/blob/main/extension/docs/Features/Trace.md" target="_blank" rel="noopener noreferrer">function stack trace showing the code where the action was actually dispatched</a></li></ul><p>In addition, the DevTools allows you to do &quot;time-travel debugging&quot;, stepping back and forth in the action history to see the entire app state and UI at different points in time.</p><p><strong>Redux was specifically designed to enable this kind of debugging, and the DevTools are one of the most powerful reasons to use Redux</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-plain-javascript-objects-for-state">Use Plain JavaScript Objects for State<a class="hash-link" href="#use-plain-javascript-objects-for-state" title="Direct link to heading">​</a></h3><p>Prefer using plain JavaScript objects and arrays for your state tree, rather than specialized libraries like Immutable.js. While there are some potential benefits to using Immutable.js, most of the commonly stated goals such as easy reference comparisons are a property of immutable updates in general, and do not require a specific library. This also keeps bundle sizes smaller and reduces complexity from data type conversions.</p><p>As mentioned above, we specifically recommend using Immer if you want to simplify immutable update logic, specifically as part of Redux Toolkit.</p><details class="detailed-explanation"><summary><h4>Detailed Explanation</h4></summary>Immutable.js has been semi-frequently used in Redux apps since the beginning.  There are several common reasons stated for using Immutable.js:<ul><li>Performance improvements from cheap reference comparisons</li><li>Performance improvements from making updates thanks to specialized data structures</li><li>Prevention of accidental mutations</li><li>Easier nested updates via APIs like <code>setIn()</code></li></ul><p>There are some valid aspects to those reasons, but in practice, the benefits aren&#x27;t as good as stated, and there&#x27;s multiple negatives to using it:</p><ul><li>Cheap reference comparisons are a property of any immutable updates, not just Immutable.js</li><li>Accidental mutations can be prevented via other mechanisms, such as using Immer (which eliminates accident-prone manual copying logic, and deep-freezes state in development by default) or <code>redux-immutable-state-invariant</code> (which checks state for mutations)</li><li>Immer allows simpler update logic overall, eliminating the need for <code>setIn()</code></li><li>Immutable.js has a very large bundle size</li><li>The API is fairly complex</li><li>The API &quot;infects&quot; your application&#x27;s code. All logic must know whether it&#x27;s dealing with plain JS objects or Immutable objects</li><li>Converting from Immutable objects to plain JS objects is relatively expensive, and always produces completely new deep object references</li><li>Lack of ongoing maintenance to the library</li></ul><p>The strongest remaining reason to use Immutable.js is fast updates of <em>very</em> large objects (tens of thousands of keys). Most applications won&#x27;t deal with objects that large.</p><p>Overall, Immutable.js adds too much overhead for too little practical benefit. Immer is a much better option.</p></details></div><div class="priority-rules priority-recommended"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="priority-c-rules-recommended">Priority C Rules: Recommended<a class="hash-link" href="#priority-c-rules-recommended" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-action-types-as-domaineventname">Write Action Types as <code>domain/eventName</code><a class="hash-link" href="#write-action-types-as-domaineventname" title="Direct link to heading">​</a></h3><p>The original Redux docs and examples generally used a &quot;SCREAMING_SNAKE_CASE&quot; convention for defining action types, such as <code>&quot;ADD_TODO&quot;</code> and <code>&quot;INCREMENT&quot;</code>. This matches typical conventions in most programming languages for declaring constant values. The downside is that the uppercase strings can be hard to read.</p><p>Other communities have adopted other conventions, usually with some indication of the &quot;feature&quot; or &quot;domain&quot; the action is related to, and the specific action type. The NgRx community typically uses a pattern like <code>&quot;[Domain] Action Type&quot;</code>, such as <code>&quot;[Login Page] Login&quot;</code>. Other patterns like <code>&quot;domain:action&quot;</code> have been used as well.</p><p>Redux Toolkit&#x27;s <code>createSlice</code> function currently generates action types that look like <code>&quot;domain/action&quot;</code>, such as <code>&quot;todos/addTodo&quot;</code>. Going forward, <strong>we suggest using the <code>&quot;domain/action&quot;</code> convention for readability</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-actions-using-the-flux-standard-action-convention">Write Actions Using the Flux Standard Action Convention<a class="hash-link" href="#write-actions-using-the-flux-standard-action-convention" title="Direct link to heading">​</a></h3><p>The original &quot;Flux Architecture&quot; documentation only specified that action objects should have a <code>type</code> field, and did not give any further guidance on what kinds of fields or naming conventions should be used for fields in actions. To provide consistency, Andrew Clark created a convention called <a href="https://github.com/redux-utilities/flux-standard-action" target="_blank" rel="noopener noreferrer">&quot;Flux Standard Actions&quot;</a> early in Redux&#x27;s development. Summarized, the FSA convention says that actions:</p><ul><li>Should always put their data into a <code>payload</code> field</li><li>May have a <code>meta</code> field for additional info</li><li>May have an <code>error</code> field to indicate the action represents a failure of some kind</li></ul><p>Many libraries in the Redux ecosystem have adopted the FSA convention, and Redux Toolkit generates action creators that match the FSA format.</p><p><strong>Prefer using FSA-formatted actions for consistency</strong>.</p><blockquote><p><strong>Note</strong>: The FSA spec says that &quot;error&quot; actions should set <code>error: true</code>, and use the same action type as the &quot;valid&quot; form of the action. In practice, most developers write separate action types for the &quot;success&quot; and &quot;error&quot; cases. Either is acceptable.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-action-creators">Use Action Creators<a class="hash-link" href="#use-action-creators" title="Direct link to heading">​</a></h3><p>&quot;Action creator&quot; functions started with the original &quot;Flux Architecture&quot; approach. With Redux, action creators are not strictly required. Components and other logic can always call <code>dispatch({type: &quot;some/action&quot;})</code> with the action object written inline.</p><p>However, using action creators provides consistency, especially in cases where some kind of preparation or additional logic is needed to fill in the contents of the action (such as generating a unique ID).</p><p><strong>Prefer using action creators for dispatching any actions</strong>. However, rather than writing action creators by hand, <strong>we recommend using the <code>createSlice</code> function from Redux Toolkit, which will generate action creators and action types automatically</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-thunks-for-async-logic">Use Thunks for Async Logic<a class="hash-link" href="#use-thunks-for-async-logic" title="Direct link to heading">​</a></h3><p>Redux was designed to be extensible, and the middleware API was specifically created to allow different forms of async logic to be plugged into the Redux store. That way, users wouldn&#x27;t be forced to learn a specific library like RxJS if it wasn&#x27;t appropriate for their needs.</p><p>This led to a wide variety of Redux async middleware addons being created, and that in turn has caused confusion and questions over which async middleware should be used.</p><p><strong>We recommend <a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener noreferrer">using the Redux Thunk middleware by default</a></strong>, as it is sufficient for most typical use cases (such as basic AJAX data fetching). In addition, use of the <code>async/await</code> syntax in thunks makes them easier to read.</p><p>If you have truly complex async workflows that involve things like cancellation, debouncing, running logic after a given action was dispatched, or &quot;background-thread&quot;-type behavior, then consider adding more powerful async middleware like Redux-Saga or Redux-Observable.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="move-complex-logic-outside-components">Move Complex Logic Outside Components<a class="hash-link" href="#move-complex-logic-outside-components" title="Direct link to heading">​</a></h3><p>We have traditionally suggested keeping as much logic as possible outside components. That was partly due to encouraging the &quot;container/presentational&quot; pattern, where many components simply accept data as props and display UI accordingly, but also because dealing with async logic in class component lifecycle methods can become difficult to maintain.</p><p><strong>We still encourage moving complex synchronous or async logic outside components, usually into thunks</strong>. This is especially true if the logic needs to read from the store state.</p><p>However, <strong>the use of React hooks does make it somewhat easier to manage logic like data fetching directly inside a component</strong>, and this may replace the need for thunks in some cases.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="use-selector-functions-to-read-from-store-state">Use Selector Functions to Read from Store State<a class="hash-link" href="#use-selector-functions-to-read-from-store-state" title="Direct link to heading">​</a></h3><p>&quot;Selector functions&quot; are a powerful tool for encapsulating reading values from the Redux store state and deriving further data from those values. In addition, libraries like Reselect enable creating memoized selector functions that only recalculate results when the inputs have changed, which is an important aspect of optimizing performance.</p><p><strong>We strongly recommend using memoized selector functions for reading store state whenever possible</strong>, and recommend creating those selectors with Reselect.</p><p>However, don&#x27;t feel that you <em>must</em> write selector functions for every field in your state. Find a reasonable balance for granularity, based on how often fields are accessed and updated, and how much actual benefit the selectors are providing in your application.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="name-selector-functions-as-selectthing">Name Selector Functions as <code>selectThing</code><a class="hash-link" href="#name-selector-functions-as-selectthing" title="Direct link to heading">​</a></h3><p><strong>We recommend prefixing selector function names with the word <code>select</code></strong>, combined with a description of the value being selected. Examples of this would be <code>selectTodos</code>, <code>selectVisibleTodos</code>, and <code>selectTodoById</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="avoid-putting-form-state-in-redux">Avoid Putting Form State In Redux<a class="hash-link" href="#avoid-putting-form-state-in-redux" title="Direct link to heading">​</a></h3><p><strong>Most form state shouldn&#x27;t go in Redux</strong>. In most use cases, the data is not truly global, is not being cached, and is not being used by multiple components at once. In addition, connecting forms to Redux often involves dispatching actions on every single change event, which causes performance overhead and provides no real benefit. (You probably don&#x27;t need to time-travel backwards one character from <code>name: &quot;Mark&quot;</code> to <code>name: &quot;Mar&quot;</code>.)</p><p>Even if the data ultimately ends up in Redux, prefer keeping the form edits themselves in local component state, and only dispatching an action to update the Redux store once the user has completed the form.</p><p>There are use cases when keeping form state in Redux does actually make sense, such as WYSIWYG live previews of edited item attributes. But, in most cases, this isn&#x27;t necessary.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/faq/miscellaneous"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Miscellaneous</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/api/api-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API 参考</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#引言" class="table-of-contents__link toc-highlight">引言</a></li><li><a href="#规则分类" class="table-of-contents__link toc-highlight">规则分类</a><ul><li><a href="#优先级-a必要" class="table-of-contents__link toc-highlight">优先级 A：必要</a></li><li><a href="#优先级-b强烈推荐" class="table-of-contents__link toc-highlight">优先级 B：强烈推荐</a></li><li><a href="#优先级-c推荐" class="table-of-contents__link toc-highlight">优先级 C：推荐</a></li></ul></li><li><a href="#a-级优先规则-必要" class="table-of-contents__link toc-highlight">A 级优先规则: 必要</a><ul><li><a href="#不要修改-state" class="table-of-contents__link toc-highlight">不要修改 State</a></li><li><a href="#reducers-不能产生副作用" class="table-of-contents__link toc-highlight">Reducers 不能产生副作用</a></li><li><a href="#不要把不可序列化的值放进-state-或-action" class="table-of-contents__link toc-highlight">不要把不可序列化的值放进 State 或 Action</a></li><li><a href="#一个应用只有一个-redux-store" class="table-of-contents__link toc-highlight">一个应用只有一个 Redux Store</a></li></ul></li><li><a href="#a-级优先规则-强烈推荐" class="table-of-contents__link toc-highlight">A 级优先规则: 强烈推荐</a><ul><li><a href="#在写-redux-逻辑时使用-redux-toolkit" class="table-of-contents__link toc-highlight">在写 Redux 逻辑时使用 Redux Toolkit</a></li><li><a href="#使用-immer-做-immutable-更新" class="table-of-contents__link toc-highlight">使用 Immer 做 Immutable 更新</a></li><li><a href="#将文件结构构造为具有单文件逻辑的功能性文件夹" class="table-of-contents__link toc-highlight">将文件结构构造为具有单文件逻辑的功能性文件夹</a></li><li><a href="#尽可能的把逻辑放进-reducers" class="table-of-contents__link toc-highlight">尽可能的把逻辑放进 Reducers</a></li><li><a href="#reducers-应该拥有-state-shape" class="table-of-contents__link toc-highlight">Reducers 应该拥有 State Shape</a></li><li><a href="#name-state-slices-based-on-the-stored-data" class="table-of-contents__link toc-highlight">Name State Slices Based On the Stored Data</a></li><li><a href="#organize-state-structure-based-on-data-types-not-components" class="table-of-contents__link toc-highlight">Organize State Structure Based on Data Types, Not Components</a></li><li><a href="#treat-reducers-as-state-machines" class="table-of-contents__link toc-highlight">Treat Reducers as State Machines</a></li><li><a href="#normalize-complex-nestedrelational-state" class="table-of-contents__link toc-highlight">Normalize Complex Nested/Relational State</a></li><li><a href="#keep-state-minimal-and-derive-additional-values" class="table-of-contents__link toc-highlight">Keep State Minimal and Derive Additional Values</a></li><li><a href="#model-actions-as-events-not-setters" class="table-of-contents__link toc-highlight">Model Actions as Events, Not Setters</a></li><li><a href="#write-meaningful-action-names" class="table-of-contents__link toc-highlight">Write Meaningful Action Names</a></li><li><a href="#allow-many-reducers-to-respond-to-the-same-action" class="table-of-contents__link toc-highlight">Allow Many Reducers to Respond to the Same Action</a></li><li><a href="#avoid-dispatching-many-actions-sequentially" class="table-of-contents__link toc-highlight">Avoid Dispatching Many Actions Sequentially</a></li><li><a href="#evaluate-where-each-piece-of-state-should-live" class="table-of-contents__link toc-highlight">Evaluate Where Each Piece of State Should Live</a></li><li><a href="#use-the-react-redux-hooks-api" class="table-of-contents__link toc-highlight">Use the React-Redux Hooks API</a></li><li><a href="#connect-more-components-to-read-data-from-the-store" class="table-of-contents__link toc-highlight">Connect More Components to Read Data from the Store</a></li><li><a href="#use-the-object-shorthand-form-of-mapdispatch-with-connect" class="table-of-contents__link toc-highlight">Use the Object Shorthand Form of <code>mapDispatch</code> with <code>connect</code></a></li><li><a href="#call-useselector-multiple-times-in-function-components" class="table-of-contents__link toc-highlight">Call <code>useSelector</code> Multiple Times in Function Components</a></li><li><a href="#use-static-typing" class="table-of-contents__link toc-highlight">Use Static Typing</a></li><li><a href="#use-the-redux-devtools-extension-for-debugging" class="table-of-contents__link toc-highlight">Use the Redux DevTools Extension for Debugging</a></li><li><a href="#use-plain-javascript-objects-for-state" class="table-of-contents__link toc-highlight">Use Plain JavaScript Objects for State</a></li></ul></li><li><a href="#priority-c-rules-recommended" class="table-of-contents__link toc-highlight">Priority C Rules: Recommended</a><ul><li><a href="#write-action-types-as-domaineventname" class="table-of-contents__link toc-highlight">Write Action Types as <code>domain/eventName</code></a></li><li><a href="#write-actions-using-the-flux-standard-action-convention" class="table-of-contents__link toc-highlight">Write Actions Using the Flux Standard Action Convention</a></li><li><a href="#use-action-creators" class="table-of-contents__link toc-highlight">Use Action Creators</a></li><li><a href="#use-thunks-for-async-logic" class="table-of-contents__link toc-highlight">Use Thunks for Async Logic</a></li><li><a href="#move-complex-logic-outside-components" class="table-of-contents__link toc-highlight">Move Complex Logic Outside Components</a></li><li><a href="#use-selector-functions-to-read-from-store-state" class="table-of-contents__link toc-highlight">Use Selector Functions to Read from Store State</a></li><li><a href="#name-selector-functions-as-selectthing" class="table-of-contents__link toc-highlight">Name Selector Functions as <code>selectThing</code></a></li><li><a href="#avoid-putting-form-state-in-redux" class="table-of-contents__link toc-highlight">Avoid Putting Form State In Redux</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started">入门</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/essentials/part-1-overview-concepts">教程</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">常见问题</a></li><li class="footer__item"><a class="footer__link-item" href="/api/api-reference">API 文档</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><div class="footer__title">更多</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/nefe/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></a></div><div class="footer__copyright">Copyright © 2015–2022 Dan Abramov and Cam Song.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.61752c2f.js"></script>
<script src="/assets/js/main.7ecee670.js"></script>
</body>
</html>