"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2592],{3905:function(t,e,n){n.d(e,{Zo:function(){return p},kt:function(){return u}});var a=n(7294);function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e){if(null==t)return{};var n,a,o=function(t,e){if(null==t)return{};var n,a,o={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}var r=a.createContext({}),d=function(t){var e=a.useContext(r),n=e;return t&&(n="function"==typeof t?t(e):s(s({},e),t)),n},p=function(t){var e=d(t.components);return a.createElement(r.Provider,{value:e},t.children)},c={inlineCode:"code",wrapper:function(t){var e=t.children;return a.createElement(a.Fragment,{},e)}},m=a.forwardRef((function(t,e){var n=t.components,o=t.mdxType,i=t.originalType,r=t.parentName,p=l(t,["components","mdxType","originalType","parentName"]),m=d(n),u=o,k=m["".concat(r,".").concat(u)]||m[u]||c[u]||i;return n?a.createElement(k,s(s({ref:e},p),{},{components:n})):a.createElement(k,s({ref:e},p))}));function u(t,e){var n=arguments,o=e&&e.mdxType;if("string"==typeof t||o){var i=n.length,s=new Array(i);s[0]=m;var l={};for(var r in e)hasOwnProperty.call(e,r)&&(l[r]=e[r]);l.originalType=t,l.mdxType="string"==typeof t?t:o,s[1]=l;for(var d=2;d<i;d++)s[d]=n[d];return a.createElement.apply(null,s)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},5778:function(t,e,n){n.d(e,{s:function(){return o}});var a=n(7294),o=function(t){var e=t.children,n=t.title,o=void 0===n?"Detailed Explanation":n;return a.createElement("details",{className:"detailed-explanation"},a.createElement("summary",null,a.createElement("h4",null,o)),e)}},7101:function(t,e,n){n.r(e),n.d(e,{assets:function(){return c},contentTitle:function(){return d},default:function(){return k},frontMatter:function(){return r},metadata:function(){return p},toc:function(){return m}});var a=n(7462),o=n(3366),i=(n(7294),n(3905)),s=n(5778),l=["components"],r={id:"part-7-standard-patterns",title:"Redux \u6df1\u5165\u6d45\u51fa\uff0c\u7b2c 7 \u8282\uff1a\u6807\u51c6 Redux \u6a21\u5f0f",sidebar_label:"\u6807\u51c6 Redux \u6a21\u5f0f",hide_title:!1,description:"Redux \u5b98\u65b9\u57fa\u7840\u6559\u7a0b\uff1a\u5b66\u4e60 Redux \u5b9e\u9645\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u6807\u51c6\u6a21\u5f0f"},d="Redux \u6df1\u5165\u6d45\u51fa\uff0c\u7b2c 7 \u8282\uff1a\u6807\u51c6 Redux \u6a21\u5f0f",p={unversionedId:"tutorials/fundamentals/part-7-standard-patterns",id:"tutorials/fundamentals/part-7-standard-patterns",title:"Redux \u6df1\u5165\u6d45\u51fa\uff0c\u7b2c 7 \u8282\uff1a\u6807\u51c6 Redux \u6a21\u5f0f",description:"Redux \u5b98\u65b9\u57fa\u7840\u6559\u7a0b\uff1a\u5b66\u4e60 Redux \u5b9e\u9645\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u6807\u51c6\u6a21\u5f0f",source:"@site/../docs/tutorials/fundamentals/part-7-standard-patterns.md",sourceDirName:"tutorials/fundamentals",slug:"/tutorials/fundamentals/part-7-standard-patterns",permalink:"/tutorials/fundamentals/part-7-standard-patterns",draft:!1,tags:[],version:"current",frontMatter:{id:"part-7-standard-patterns",title:"Redux \u6df1\u5165\u6d45\u51fa\uff0c\u7b2c 7 \u8282\uff1a\u6807\u51c6 Redux \u6a21\u5f0f",sidebar_label:"\u6807\u51c6 Redux \u6a21\u5f0f",hide_title:!1,description:"Redux \u5b98\u65b9\u57fa\u7840\u6559\u7a0b\uff1a\u5b66\u4e60 Redux \u5b9e\u9645\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u6807\u51c6\u6a21\u5f0f"},sidebar:"docs",previous:{title:"\u5f02\u6b65\u903b\u8f91\u548c\u6570\u636e\u83b7\u53d6",permalink:"/tutorials/fundamentals/part-6-async-logic"},next:{title:"\u4f7f\u7528 Redux Toolkit \u7684\u73b0\u4ee3 Redux",permalink:"/tutorials/fundamentals/part-8-modern-redux"}},c={},m=[{value:"Action Creators",id:"action-creators",level:2},{value:"\u4f7f\u7528 Action Creators",id:"\u4f7f\u7528-action-creators",level:3},{value:"\u8bb0\u5fc6\u5316\uff08Memoized\uff09Selectors",id:"\u8bb0\u5fc6\u5316memoizedselectors",level:2},{value:"\u4f7f\u7528 <code>createSelector</code> \u6765\u8bb0\u5fc6\uff08Memoize\uff09 Selectors",id:"\u4f7f\u7528-createselector-\u6765\u8bb0\u5fc6memoize-selectors",level:3},{value:"\u5177\u6709\u591a\u4e2a\u53c2\u6570\u7684 Selectors",id:"\u5177\u6709\u591a\u4e2a\u53c2\u6570\u7684-selectors",level:3},{value:"\u5f02\u6b65\u8bf7\u6c42\u72b6\u6001",id:"\u5f02\u6b65\u8bf7\u6c42\u72b6\u6001",level:2},{value:"Loading State \u7684\u679a\u4e3e\u503c",id:"loading-state-\u7684\u679a\u4e3e\u503c",level:3},{value:"Flux Standard Actions",id:"flux-standard-actions",level:2},{value:"\u89c4\u8303\u5316 State",id:"\u89c4\u8303\u5316-state",level:2},{value:"Thunks \u548c Promises",id:"thunks-\u548c-promises",level:2},{value:"\u4f60\u7684\u6240\u5b66",id:"\u4f60\u7684\u6240\u5b66",level:2},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}],u={toc:m};function k(t){var e=t.components,r=(0,o.Z)(t,l);return(0,i.kt)("wrapper",(0,a.Z)({},u,r,{components:e,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"redux-\u6df1\u5165\u6d45\u51fa\u7b2c-7-\u8282\u6807\u51c6-redux-\u6a21\u5f0f"},"Redux \u6df1\u5165\u6d45\u51fa\uff0c\u7b2c 7 \u8282\uff1a\u6807\u51c6 Redux \u6a21\u5f0f"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u4f60\u5c06\u5b66\u5230")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u5b9e\u9645\u5e94\u7528\u4e2d Redux \u7684\u6807\u51c6\u4f7f\u7528\u6a21\u5f0f\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u6a21\u5f0f\u5b58\u5728\u7684\u539f\u56e0\uff1a",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528 Action creators \u5c01\u88c5 action \u5bf9\u8c61"),(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u8bb0\u5fc6\u5316\uff08memoized\uff09selectors \u4ee5\u63d0\u9ad8\u6027\u80fd"),(0,i.kt)("li",{parentName:"ul"},"\u901a\u8fc7\u52a0\u8f7d\u679a\u4e3e\u503c\u8ddf\u8e2a\u8bf7\u6c42\u72b6\u6001"),(0,i.kt)("li",{parentName:"ul"},"\u89c4\u8303\u5316 state \u4ee5\u7ba1\u7406\u9879\u76ee\u96c6\u5408"),(0,i.kt)("li",{parentName:"ul"},"\u4e0e promises\u3001thunks \u4e00\u8d77\u5de5\u4f5c")))))),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u9884\u7f6e\u77e5\u8bc6")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},"\u7406\u89e3\u4e86\u4e4b\u524d\u6240\u6709\u5c0f\u8282\u7684\u5185\u5bb9")))),(0,i.kt)("p",null,"\u5728",(0,i.kt)("a",{parentName:"p",href:"/tutorials/fundamentals/part-6-async-logic"},"\u7b2c 6 \u8282\uff1a\u5f02\u6b65\u903b\u8f91\u548c\u6570\u636e\u83b7\u53d6"),"\uff0c\u6211\u4eec\u4e86\u89e3\u4e86\u600e\u6837\u4f7f\u7528 Redux middleware \u7f16\u5199\u5f02\u6b65\u903b\u8f91\u6765\u4e0e store \u8fdb\u884c\u4ea4\u4e92\u3002\u5c24\u5176\u662f\u4f7f\u7528 Redux thunk middleware \u6765\u7f16\u5199\u80fd\u591f\u5305\u542b\u53ef\u91cd\u7528\u5f02\u6b65\u903b\u8f91\u7684\u51fd\u6570\uff0c\u800c\u65e0\u9700\u63d0\u524d\u77e5\u9053\u4ed6\u4eec\u5c06\u8981\u4e0e\u54ea\u4e9b Redux store \u8fdb\u884c\u901a\u4fe1\u3002"),(0,i.kt)("p",null,"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86 Redux \u5b9e\u9645\u5de5\u4f5c\u539f\u7406\u7684\u57fa\u7840\u77e5\u8bc6\u3002\u4f46\u662f\uff0c\u73b0\u5b9e\u4e16\u754c\u7684 Redux \u5e94\u7528\u7a0b\u5e8f\u5728\u8fd9\u4e9b\u57fa\u7840\u4e0a\u4f7f\u7528\u4e86\u4e00\u4e9b\u989d\u5916\u7684\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u91cd\u70b9\u9700\u8981\u6ce8\u610f\uff0c",(0,i.kt)("strong",{parentName:"p"},"\u8fd9\u4e9b\u6a21\u5f0f\u90fd\u4e0d\u662f\u4f7f\u7528 Redux \u6240\u5fc5\u9700\u7684\uff01"),"\u4f46\u662f\uff0c\u6bcf\u4e2a\u6a21\u5f0f\u90fd\u6709\u5f88\u597d\u7684\u5b58\u5728\u7406\u7531\uff0c\u5e76\u4e14\u51e0\u4e4e\u5728\u6bcf\u4e2a Redux \u4ee3\u7801\u5e93\u4e2d\u90fd\u53ef\u4ee5\u770b\u5230\u90e8\u5206\u6216\u5168\u90e8\u6a21\u5f0f\u3002"),(0,i.kt)("p",null,"\u5728\u672c\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u91cd\u505a\u73b0\u6709\u7684 todo \u5e94\u7528\u7a0b\u5e8f\u4ee5\u4f7f\u7528\u5176\u4e2d\u4e00\u4e9b\u6a21\u5f0f\uff0c\u5e76\u8ba8\u8bba\u4e3a\u4ec0\u4e48\u5b83\u4eec\u5e38\u7528\u5728 Redux \u5e94\u7528\u4e2d\u3002\u7136\u540e\u5728",(0,i.kt)("a",{parentName:"p",href:"/tutorials/fundamentals/part-8-modern-redux"},(0,i.kt)("strong",{parentName:"a"},"\u7b2c 8 \u8282")),"\uff0c\u6211\u4eec\u5c06\u8ba8\u8bba\u201c\u73b0\u4ee3\u5316 Redux\u201d\uff0c\u5305\u62ec\u600e\u6837\u4f7f\u7528\u5b98\u65b9 ",(0,i.kt)("a",{parentName:"p",href:"https://redux-toolkit.js.org"},"Redux Toolkit")," \u5e93\u7b80\u5316\u5df2\u5199\u7684 Redux \u903b\u8f91\u3002\u4ee5\u53ca\u4e3a\u4ec0\u4e48",(0,i.kt)("strong",{parentName:"p"},"\u5efa\u8bae\u4f7f\u7528 Redux Toolkit \u4f5c\u4e3a\u7f16\u5199 Redux \u5e94\u7528\u7684\u6807\u51c6\u65b9\u6cd5"),"\u3002"),(0,i.kt)("h2",{id:"action-creators"},"Action Creators"),(0,i.kt)("p",null,"\u5728\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u4e00\u76f4\u5728 dispatch \u7684\u5730\u65b9\u4ee5\u5b57\u9762\u91cf\u7684\u65b9\u5f0f\u76f4\u63a5\u5199 action \u5bf9\u8c61\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"dispatch({ type: 'todos/todoAdded', payload: trimmedText })\n")),(0,i.kt)("p",null,"\u4f46\u662f\uff0c\u5728\u5b9e\u8df5\u4e2d\uff0c\u7f16\u5199\u826f\u597d\u7684 Redux \u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u4e0a\u5e76\u4e0d\u4f1a\u5728\u6211\u4eec dispatch \u8fd9\u4e9b action \u5bf9\u8c61\u65f6\u4ee5\u5185\u8054\u7684\u65b9\u5f0f\u7f16\u5199\u5b83\u4eec\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u4f7f\u7528 action creator \u51fd\u6570\u3002"),(0,i.kt)("p",null,"action creator \u5c31\u662f\u521b\u5efa\u5e76\u8fd4\u56de\u4e00\u4e2a action \u5bf9\u8c61\u7684\u51fd\u6570\u3002\u6211\u4eec\u901a\u5e38\u4f7f\u7528\u5b83\u4eec\u6765\u907f\u514d\u6bcf\u6b21\u90fd\u624b\u52a8\u7f16\u5199 action \u5bf9\u8c61\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const todoAdded = text => {\n  return {\n    type: 'todos/todoAdded',\n    payload: text\n  }\n}\n")),(0,i.kt)("p",null,"\u6211\u4eec",(0,i.kt)("strong",{parentName:"p"},"\u8c03\u7528\u8fd9\u4e2a action creator"),"\uff0c\u7136\u540e",(0,i.kt)("strong",{parentName:"p"},"\u628a\u8fd4\u56de\u503c\u76f4\u63a5\u4f20\u7ed9 ",(0,i.kt)("inlineCode",{parentName:"strong"},"dispatch")),"\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"store.dispatch(todoAdded('Buy milk'))\n\nconsole.log(store.getState().todos)\n// [ {id: 0, text: 'Buy milk', completed: false}]\n")),(0,i.kt)(s.s,{title:"\u8be6\u7ec6\u8bf4\u660e\uff1a\u4e3a\u4ec0\u4e48\u4f7f\u7528 Action Creators\uff1f",mdxType:"DetailedExplanation"},(0,i.kt)("p",null,"\u5728 todo \u5e94\u7528\u7a0b\u5e8f\u8fd9\u4e2a\u5c0f\u793a\u4f8b\u4e2d\uff0c\u6bcf\u6b21\u90fd\u76f4\u63a5\u5199 action \u5bf9\u8c61\u5e76\u4e0d\u9ebb\u70e6\u3002\u5b9e\u9645\u4e0a\uff0c\u6539\u6210\u4f7f\u7528 action creators \u7684\u65b9\u5f0f\u540e\uff0c\u6211\u4eec ",(0,i.kt)("em",{parentName:"p"},"\u989d\u5916")," \u505a\u4e86\u4e00\u4e9b\u5de5\u4f5c\u2014\u2014\u5fc5\u987b\u7f16\u5199\u4e00\u4e2a\u51fd\u6570 ",(0,i.kt)("em",{parentName:"p"},"\u548c")," \u4e00\u4e2a action \u5bf9\u8c61\u3002"),(0,i.kt)("p",null,"\u4f46\u662f\uff0c\u5047\u5982\u6211\u4eec\u9700\u8981\u5728\u5e94\u7528\u7a0b\u5e8f\u7684\u591a\u4e2a\u5730\u65b9 dispatch \u76f8\u540c\u7684 action \u5462\uff1f\u6216\u8005\u5047\u5982\u6bcf\u6b21 dispatch action \u65f6\u90fd\u8981\u5904\u7406\u4e00\u4e9b\u989d\u5916\u7684\u903b\u8f91\uff0c\u6bd4\u5982\u521b\u5efa\u4e00\u4e2a\u552f\u4e00\u7684 ID\uff1f\u6211\u4eec\u6700\u7ec8\u5c06\u4e0d\u5f97\u4e0d\u5728\u6bcf\u6b21\u9700\u8981 dispatch action \u65f6\u590d\u5236\u7c98\u8d34\u989d\u5916\u7684\u8bbe\u7f6e\u903b\u8f91\u3002"),(0,i.kt)("p",null,"Action creators \u6709\u4e24\u4e2a\u4e3b\u8981\u7528\u9014\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u51c6\u5907\u548c\u683c\u5f0f\u5316 action \u5bf9\u8c61\u7684\u5185\u5bb9"),(0,i.kt)("li",{parentName:"ul"},"\u5c01\u88c5\u521b\u5efa action \u65f6\u6240\u9700\u7684\u4efb\u4f55\u989d\u5916\u5de5\u4f5c")),(0,i.kt)("p",null,"\u8fd9\u6837\uff0c\u65e0\u8bba\u662f\u5426\u6709\u4efb\u4f55\u989d\u5916\u7684\u5de5\u4f5c\u9700\u8981\u5b8c\u6210\uff0c\u6211\u4eec\u90fd\u6709\u4e86\u4e00\u81f4\u7684\u65b9\u6cd5\u6765\u521b\u5efa action\u3002thunk \u4ea6\u662f\u5982\u6b64\u3002")),(0,i.kt)("h3",{id:"\u4f7f\u7528-action-creators"},"\u4f7f\u7528 Action Creators"),(0,i.kt)("p",null,"\u8ba9\u6211\u4eec\u66f4\u65b0\u4e00\u4e0b todosSlice \u6587\u4ef6\uff0c\u4ee5\u4fbf\u4e3a\u51e0\u79cd action \u7c7b\u578b\u4f7f\u7528 action creators\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u5c06\u4ece\u5230\u76ee\u524d\u4e3a\u6b62\u4e00\u76f4\u4f7f\u7528\u7684\u4e24\u4e2a\u4e3b\u8981\u7684 actions \u5f00\u59cb\uff1a\u4ece\u670d\u52a1\u5668\u52a0\u8f7d todos \u5217\u8868\uff0c\u4ee5\u53ca\u5728\u5c06\u5176\u4fdd\u5b58\u5230\u670d\u52a1\u5668\u540e\u6dfb\u52a0\u65b0\u7684 todo\u3002"),(0,i.kt)("p",null,"\u5f53\u4e0b\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"todosSlice.js")," \u91cc\u76f4\u63a5 dispatch \u4e86\u4e00\u4e2a action \u5bf9\u8c61\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"dispatch({ type: 'todos/todosLoaded', payload: response.todos })\n")),(0,i.kt)("p",null,"\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u521b\u5efa\u5e76\u8fd4\u56de\u76f8\u540c\u7c7b\u578b\u7684 action \u5bf9\u8c61\uff0c\u4f46\u63a5\u53d7 todos \u6570\u7ec4\u4f5c\u4e3a\u5176\u53c2\u6570\uff0c\u5e76\u5c06\u5176\u4f5c\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"action.payload")," \u653e\u5165 action \u4e2d\u3002\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"fetchTodos")," thunk \u4e2d\u7684\u65b0 action creator \u6765 dispatch action\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// highlight-start\nexport const todosLoaded = todos => {\n  return {\n    type: 'todos/todosLoaded',\n    payload: todos\n  }\n}\n// highlight-end\n\nexport async function fetchTodos(dispatch, getState) {\n  const response = await client.get('/fakeApi/todos')\n  // highlight-next-line\n  dispatch(todosLoaded(response.todos))\n}\n")),(0,i.kt)("p",null,'\u6211\u4eec\u4e5f\u4e3a "todo added" action \u505a\u4e00\u6837\u7684\u4e8b\u60c5:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// highlight-start\nexport const todoAdded = todo => {\n  return {\n    type: 'todos/todoAdded',\n    payload: todo\n  }\n}\n// highlight-end\n\nexport function saveNewTodo(text) {\n  return async function saveNewTodoThunk(dispatch, getState) {\n    const initialTodo = { text }\n    const response = await client.post('/fakeApi/todos', { todo: initialTodo })\n    // highlight-next-line\n    dispatch(todoAdded(response.todo))\n  }\n}\n")),(0,i.kt)("p",null,'\u518d\u4e3a "color filter changed" action \u505a\u4e00\u6837\u7684\u4e8b\u60c5:'),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/filters/filtersSlice.js"',title:'"src/features/filters/filtersSlice.js"'},"// highlight-start\nexport const colorFilterChanged = (color, changeType) => {\n  return {\n    type: 'filters/colorFilterChanged',\n    payload: { color, changeType }\n  }\n}\n// highlight-end\n")),(0,i.kt)("p",null,"\u7531\u4e8e\u6b64 action \u662f\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"<Footer>")," \u7ec4\u4ef6 dispatch \u7684\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"colorFilterChanged")," \u5bfc\u5165\u5230\u8be5\u5904\u5e76\u4f7f\u7528\u5b83\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/footer/Footer.js"',title:'"src/features/footer/Footer.js"'},"import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\n\nimport { availableColors, capitalize } from '../filters/colors'\n// highlight-next-line\nimport { StatusFilters, colorFilterChanged } from '../filters/filtersSlice'\n\n// \u7701\u7565\u5b50\u7ec4\u4ef6\n\nconst Footer = () => {\n  const dispatch = useDispatch()\n\n  const todosRemaining = useSelector(state => {\n    const uncompletedTodos = state.todos.filter(todo => !todo.completed)\n    return uncompletedTodos.length\n  })\n\n  const { status, colors } = useSelector(state => state.filters)\n\n  const onMarkCompletedClicked = () => dispatch({ type: 'todos/allCompleted' })\n  const onClearCompletedClicked = () =>\n    dispatch({ type: 'todos/completedCleared' })\n\n  // highlight-start\n  const onColorChange = (color, changeType) =>\n    dispatch(colorFilterChanged(color, changeType))\n  // highlight-end\n\n  const onStatusChange = status =>\n    dispatch({ type: 'filters/statusFilterChanged', payload: status })\n\n  // \u7701\u7565\u6e32\u67d3\u8f93\u51fa\n}\n\nexport default Footer\n")),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"colorFilterChanged")," action creator \u5b9e\u9645\u4e0a\u63a5\u6536\u4e24\u4e2a\u4e0d\u540c\u7684\u53c2\u6570\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u7ec4\u5408\u5728\u4e00\u8d77\u4ee5\u5f62\u6210\u6b63\u786e\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"action.payload")," \u5b57\u6bb5\u3002"),(0,i.kt)("p",null,"\u8fd9\u4e0d\u4f1a\u6539\u53d8\u5e94\u7528\u7a0b\u5e8f\u7684\u5de5\u4f5c\u65b9\u5f0f\u6216 Redux \u6570\u636e\u6d41\u7684\u884c\u4e3a\u65b9\u5f0f\u2014\u2014\u6211\u4eec\u4ecd\u5728\u521b\u5efa action \u5bf9\u8c61\u5e76 dispatch \u5b83\u4eec\u3002\u4f46\u662f\uff0c\u6211\u4eec\u73b0\u5728\u4e0d\u662f\u76f4\u63a5\u5728\u4ee3\u7801\u4e2d\u7f16\u5199 action \u5bf9\u8c61\uff0c\u800c\u662f\u4f7f\u7528 action creator \u5728 dispatch \u8fd9\u4e9b action \u5bf9\u8c61\u4e4b\u524d\u5c31\u51c6\u5907\u597d\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u4e5f\u53ef\u4ee5\u7ed3\u5408 thunk \u51fd\u6570\u4f7f\u7528 action creators\uff0c\u5b9e\u9645\u4e0a",(0,i.kt)("a",{parentName:"p",href:"/tutorials/fundamentals/part-6-async-logic#saving-todo-items"},"\u7b2c 6 \u8282\u6211\u4eec\u5df2\u7ecf\u5728 action creator \u5185\u5305\u88f9\u4e86\u4e00\u4e2a thunk \u4e86"),"\u3002\u6211\u4eec\u4e13\u95e8\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"saveNewTodo")," \u5305\u88c5\u5728 thunk action creator \u51fd\u6570\u4e2d\uff0c\u4ee5\u4fbf\u53ef\u4ee5\u4f20\u5165 ",(0,i.kt)("inlineCode",{parentName:"p"},"text")," \u53c2\u6570\u3002\u867d\u7136 ",(0,i.kt)("inlineCode",{parentName:"p"},"fetchTodos")," \u4e0d\u5e26\u4efb\u4f55\u53c2\u6570\uff0c\u4f46\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u5c06\u5176\u5305\u88c5\u5728 action creator \u4e2d\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// highlight-next-line\nexport function fetchTodos() {\n  return async function fetchTodosThunk(dispatch, getState) {\n    const response = await client.get('/fakeApi/todos')\n    dispatch(todosLoaded(response.todos))\n  }\n}\n")),(0,i.kt)("p",null,"\u8fd9\u610f\u5473\u7740\u6211\u4eec\u5fc5\u987b\u66f4\u6539\u5b83\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"index.js")," \u4e2d dispatch \u7684\u4f4d\u7f6e\u4ee5\u8c03\u7528\u5916\u90e8 thunk action creator \u51fd\u6570\uff0c\u5e76\u5c06\u8fd4\u56de\u7684\u5185\u90e8 thunk \u51fd\u6570\u4f20\u9012\u7ed9 ",(0,i.kt)("inlineCode",{parentName:"p"},"dispatch"),"\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/index.js"',title:'"src/index.js"'},"import store from './store'\nimport { fetchTodos } from './features/todos/todosSlice'\n\n// highlight-next-line\nstore.dispatch(fetchTodos())\n")),(0,i.kt)("p",null,"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u7ecf\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"function")," \u5173\u952e\u5b57\u7f16\u5199\u4e86 thunks\uff0c\u6765\u663e\u793a\u5730\u8868\u660e\u4f7f\u7528\u76ee\u7684\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u8bed\u6cd5\u6765\u7f16\u5199\u3002\u4f7f\u7528\u9690\u5f0f\u8fd4\u56de\u53ef\u4ee5\u7f29\u77ed\u4ee3\u7801\uff0c\u4f46\u5982\u679c\u4f60\u4e0d\u719f\u6089\u7bad\u5934\u51fd\u6570\u7684\u8bdd\uff0c\u5b83\u4e5f\u53ef\u80fd\u4f7f\u9605\u8bfb\u53d8\u5f97\u6709\u70b9\u56f0\u96be\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// \u548c\u4e0a\u9762\u7684\u4f8b\u5b50\u4e00\u6837\uff01\n// highlight-next-line\nexport const fetchTodos = () => async dispatch => {\n  const response = await client.get('/fakeApi/todos')\n  dispatch(todosLoaded(response.todos))\n}\n")),(0,i.kt)("p",null,"\u540c\u6837\uff0c\u5982\u679c\u6211\u4eec\u613f\u610f\uff0c",(0,i.kt)("em",{parentName:"p"},"\u4e5f\u53ef\u4ee5")," \u7f29\u77ed action creators\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// highlight-next-line\nexport const todoAdded = todo => ({ type: 'todos/todoAdded', payload: todo })\n")),(0,i.kt)("p",null,"\u7531\u4f60\u51b3\u5b9a\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u4f7f\u7528\u7bad\u5934\u51fd\u6570\u662f\u5426\u66f4\u597d\u3002"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u5173\u4e8e action creators \u4e3a\u4f55\u6709\u7528\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://blog.isquaredsoftware.com/2016/10/idiomatic-redux-why-use-action-creators/"},"Idiomatic Redux: Why Use Action Creators?"))))),(0,i.kt)("h2",{id:"\u8bb0\u5fc6\u5316memoizedselectors"},"\u8bb0\u5fc6\u5316\uff08Memoized\uff09Selectors"),(0,i.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u53ef\u4ee5\u7f16\u5199 selector \u51fd\u6570\u4e86\uff0c\u5b83\u63a5\u53d7 Redux ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," \u5bf9\u8c61\u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const selectTodos = state => state.todos\n")),(0,i.kt)("p",null,"\u5047\u5982\u6211\u4eec\u9700\u8981 ",(0,i.kt)("em",{parentName:"p"},"\u6d3e\u751f")," \u4e00\u4e9b\u6570\u636e\u600e\u4e48\u529e\uff1f\u4e3e\u4e2a\u4f8b\u5b50\uff0c\u6216\u8bb8\u6211\u4eec\u53ea\u60f3\u8981\u4e00\u4e2a\u4ec5\u5305\u542b todo IDs \u7684\u6570\u7ec4\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const selectTodoIds = state => state.todos.map(todo => todo.id)\n")),(0,i.kt)("p",null,"\u7136\u800c\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"array.map()")," \u603b\u662f\u8fd4\u56de\u4e00\u4e2a\u65b0\u6570\u7ec4\u5f15\u7528\u3002\u6211\u4eec\u77e5\u9053 ",(0,i.kt)("em",{parentName:"p"},"\u6bcf\u6b21")," dispatch action \u540e React-Redux \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"useSelector")," hook \u90fd\u4f1a\u91cd\u65b0\u8c03\u7528\u5176 selector \u51fd\u6570\uff0c\u5982\u679c selector \u8fd4\u56de\u4e00\u4e2a\u65b0\u503c\uff0c\u7ec4\u4ef6\u4e00\u5b9a\u4f1a\u91cd\u65b0\u6e32\u67d3\u3002"),(0,i.kt)("p",null,"\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c",(0,i.kt)("strong",{parentName:"p"},"\u5728 ",(0,i.kt)("em",{parentName:"strong"},"\u6bcf\u4e2a")," action \u540e\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"strong"},"useSelector(selectTodoIds)")," \u5c06 ",(0,i.kt)("em",{parentName:"strong"},"\u603b\u662f")," \u9020\u6210\u91cd\u6e32\u67d3\uff0c\u56e0\u4e3a\u8fd4\u56de\u7684\u662f\u4e00\u4e2a\u65b0\u6570\u7ec4\u5f15\u7528\uff01")),(0,i.kt)("p",null,"\u5728\u7b2c 5 \u8282\uff0c\u6211\u4eec\u770b\u5230",(0,i.kt)("a",{parentName:"p",href:"/tutorials/fundamentals/part-5-ui-react#selecting-data-in-list-items-by-id"},"\u53ef\u4ee5\u5c06 ",(0,i.kt)("inlineCode",{parentName:"a"},"shallowEqual")," \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\u7ed9 ",(0,i.kt)("inlineCode",{parentName:"a"},"useSelector")),"\u3002\u73b0\u5728\u8fd8\u6709\u53e6\u4e00\u9009\u62e9\uff1a\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u201c\u8bb0\u5fc6\u5316\u201d\uff08memoized\uff09selectors\u3002"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Memoization")," \u662f\u4e00\u79cd\u7f13\u5b58\u2014\u2014\u5177\u4f53\u6765\u8bf4\uff0c\u5c31\u662f\u4fdd\u5b58\u90a3\u4e9b\u975e\u5e38\u8017\u65f6\u7684\u8ba1\u7b97\u7ed3\u679c\uff0c\u7136\u540e\u518d\u6b21\u9047\u5230\u540c\u6837\u7684\u8ba1\u7b97\u4efb\u52a1\u65f6\uff0c\u76f4\u63a5\u91cd\u7528\u8fd9\u4e9b\u7ed3\u679c\u3002"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Memoized selector \u51fd\u6570"),"\u662f\u4fdd\u5b58\u6700\u65b0\u7ed3\u679c\u503c\u7684 selector\uff0c\u5982\u679c\u4f7f\u7528\u76f8\u540c\u7684\u8f93\u5165\u591a\u6b21\u8c03\u7528\u5b83\u4eec\uff0c\u5c06\u5f97\u5230\u76f8\u540c\u7684\u7ed3\u679c\u503c\u3002\u5982\u679c\u4f7f\u7528\u4e0e\u4e0a\u6b21 ",(0,i.kt)("em",{parentName:"p"},"\u4e0d\u540c\u7684")," \u8f93\u5165\u8c03\u7528\u5b83\u4eec\uff0c\u5b83\u4eec\u5c06\u91cd\u65b0\u8ba1\u7b97\u65b0\u7684\u7ed3\u679c\u503c\uff0c\u5c06\u5176\u7f13\u5b58\u5e76\u8fd4\u56de\u65b0\u503c\u3002"),(0,i.kt)("h3",{id:"\u4f7f\u7528-createselector-\u6765\u8bb0\u5fc6memoize-selectors"},"\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"h3"},"createSelector")," \u6765\u8bb0\u5fc6\uff08Memoize\uff09 Selectors"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},(0,i.kt)("a",{parentName:"strong",href:"https://github.com/reduxjs/reselect"},"Reselect \u5e93")," \u63d0\u4f9b\u4e86\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"strong"},"createSelector")," API\uff0c\u5b83\u5c06\u751f\u6210 memoized selector \u51fd\u6570"),"\u3002",(0,i.kt)("inlineCode",{parentName:"p"},"createSelector")," \u63a5\u6536\u4e00\u4e2a\u6216\u591a\u4e2a input selector \u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u5916\u52a0\u4e00\u4e2a output selector\uff0c\u5e76\u8fd4\u56de\u65b0\u7684 selector \u51fd\u6570\u3002\u6bcf\u6b21\u8c03\u7528 selector \u65f6\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6240\u6709 input selectors \u90fd\u4f7f\u7528\u6240\u6709\u53c2\u6570\u88ab\u8c03\u7528"),(0,i.kt)("li",{parentName:"ul"},"\u53ea\u8981\u4efb\u4f55 input selector \u8fd4\u56de\u503c\u5df2\u66f4\u6539\uff0coutput selector \u90fd\u5c06\u91cd\u65b0\u8fd0\u884c"),(0,i.kt)("li",{parentName:"ul"},"\u6240\u6709 input selector \u7684\u7ed3\u679c\u90fd\u5c06\u6210\u4e3a output selector \u7684\u53c2\u6570"),(0,i.kt)("li",{parentName:"ul"},"output selector \u7684\u6700\u7ec8\u7ed3\u679c\u5c06\u88ab\u7f13\u5b58\u4ee5\u4f9b\u4e0b\u6b21\u4f7f\u7528")),(0,i.kt)("p",null,"\u8ba9\u6211\u4eec\u6765\u521b\u5efa\u4e00\u4e2a\u8bb0\u5fc6\u5316\u7248\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"selectTodoIds"),"\uff0c\u5e76\u4e14\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"<TodoList>")," \u4e2d\u4f7f\u7528\u3002"),(0,i.kt)("p",null,"\u9996\u5148\u6211\u4eec\u9700\u8981\u5b89\u88c5 Reselect\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"npm install reselect\n")),(0,i.kt)("p",null,"\u63a5\u7740\u6211\u4eec\u5bfc\u5165\u4e14\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"createSelector"),"\u3002\u6211\u4eec\u6700\u521d\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"selectTodoIds")," \u51fd\u6570\u662f\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"TodoList.js")," \u4e2d\u5b9a\u4e49\u7684\uff0c\u4f46\u66f4\u5e38\u89c1\u7684\u662f selector \u51fd\u6570\u5199\u5728\u76f8\u5173\u7684 slice \u6587\u4ef6\u4e2d\u3002\u56e0\u6b64\uff0c\u8ba9\u6211\u4eec\u5c06\u5176\u6dfb\u52a0\u5230 todos slice \u4e2d\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// highlight-next-line\nimport { createSelector } from 'reselect'\n\n// \u7701\u7565 reducer\n\n// \u7701\u7565 action creators\n\n// highlight-start\nexport const selectTodoIds = createSelector(\n  // \u9996\u5148\u4f20\u5165\u4e00\u4e2a\u6216\u66f4\u591a\u7684 input selector \u51fd\u6570\uff1a\n  state => state.todos,\n  // \u7136\u540e\uff0coutput selector \u63a5\u6536\u6240\u6709\u8f93\u5165\u7ed3\u679c\u4f5c\u4e3a\u53c2\u6570\n  // \u5e76\u8fd4\u56de\u6700\u7ec8\u7ed3\u679c\u503c\n  todos => todos.map(todo => todo.id)\n)\n// highlight-end\n")),(0,i.kt)("p",null,"\u63a5\u4e0b\u6765\uff0c\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"<TodoList>")," \u91cc\u4f7f\u7528\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/TodoList.js"',title:'"src/features/todos/TodoList.js"'},"import React from 'react'\nimport { useSelector, shallowEqual } from 'react-redux'\n\n// highlight-next-line\nimport { selectTodoIds } from './todosSlice'\nimport TodoListItem from './TodoListItem'\n\nconst TodoList = () => {\n  // highlight-next-line\n  const todoIds = useSelector(selectTodoIds)\n\n  const renderedListItems = todoIds.map(todoId => {\n    return <TodoListItem key={todoId} id={todoId} />\n  })\n\n  return <ul className=\"todo-list\">{renderedListItems}</ul>\n}\n")),(0,i.kt)("p",null,"\u8fd9\u5b9e\u9645\u4e0a\u4e0e ",(0,i.kt)("inlineCode",{parentName:"p"},"shallowEqual")," \u6bd4\u8f83\u51fd\u6570\u7684\u884c\u4e3a\u7565\u6709\u4e0d\u540c\u3002\u6bcf\u5f53 ",(0,i.kt)("inlineCode",{parentName:"p"},"state.todos")," \u6570\u7ec4\u66f4\u6539\u65f6\uff0c\u6211\u4eec\u90fd\u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684 todo IDs \u6570\u7ec4\u3002\u8fd9\u5305\u62ec\u5bf9 todo \u7684\u4efb\u4f55\u4e0d\u53ef\u53d8\u66f4\u65b0\uff0c\u4f8b\u5982\u5207\u6362\u5176 ",(0,i.kt)("inlineCode",{parentName:"p"},"completed")," \u5b57\u6bb5\uff0c\u56e0\u4e3a\u6211\u4eec\u5fc5\u987b\u4e3a\u4e0d\u53ef\u53d8\u66f4\u65b0\u521b\u5efa\u4e00\u4e2a\u65b0\u6570\u7ec4\u3002"),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u4ec5\u5f53\u4f60\u5b9e\u9645\u9700\u8981\u4ece\u539f\u59cb\u6570\u636e\u6d3e\u751f\u5176\u4ed6\u503c\u65f6\uff0cmemoized selectors \u624d\u6709\u7528\u3002\u5982\u679c\u53ea\u662f\u67e5\u627e\u5e76\u8fd4\u56de\u73b0\u6709\u503c\uff0c\u5219\u53ef\u4ee5\u5c06 selector \u4f5c\u4e3a\u666e\u901a\u51fd\u6570\u3002"))),(0,i.kt)("h3",{id:"\u5177\u6709\u591a\u4e2a\u53c2\u6570\u7684-selectors"},"\u5177\u6709\u591a\u4e2a\u53c2\u6570\u7684 Selectors"),(0,i.kt)("p",null,"todo \u5e94\u7528\u7a0b\u5e8f\u5e94\u8be5\u80fd\u591f\u6839\u636e\u5176\u5b8c\u6210\u72b6\u6001\u8fc7\u6ee4\u51fa\u53ef\u89c1\u7684 todo \u5217\u8868\u3002\u8ba9\u6211\u4eec\u7f16\u5199\u4e00\u4e2a memoized selector\uff0c\u6765\u8fd4\u56de\u8fc7\u6ee4\u540e\u7684 todo \u5217\u8868\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u9700\u8981\u6574\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"todos")," \u6570\u7ec4\u4f5c\u4e3a output selector \u7684\u4e00\u4e2a\u53c2\u6570\u3002\u8fd8\u9700\u8981\u4f20\u5165\u5f53\u524d\u5b8c\u6210\u72b6\u6001\u7684\u8fc7\u6ee4\u503c\u3002\u6211\u4eec\u5c06\u6dfb\u52a0\u4e00\u4e2a\u5355\u72ec\u7684 input selector \u6765\u63d0\u53d6\u6bcf\u4e2a\u503c\uff0c\u5e76\u5c06\u7ed3\u679c\u4f20\u9012\u7ed9 output selector\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"import { createSelector } from 'reselect'\nimport { StatusFilters } from '../filters/filtersSlice'\n\n// \u7701\u7565\u5176\u4ed6\u4ee3\u7801\n\n// highlight-start\nexport const selectFilteredTodos = createSelector(\n  // \u7b2c\u4e00\u4e2a input selector\uff1a\u6240\u6709\u7684 todo \u5217\u8868\n  state => state.todos,\n  // \u7b2c\u4e8c\u4e2a input selector\uff1a\u5f53\u524d\u72b6\u6001\u8fc7\u6ee4\u5668\n  state => state.filters.status,\n  // Output selector\uff1a\u63a5\u6536\u4e24\u4e2a\u503c\n  (todos, status) => {\n    if (status === StatusFilters.All) {\n      return todos\n    }\n\n    const completedStatus = status === StatusFilters.Completed\n    // \u6839\u636e\u8fc7\u6ee4\u5668\u8fd4\u56de\u672a\u5b8c\u6210\u6216\u5df2\u5b8c\u6210\u7684 todo \u5217\u8868\n    return todos.filter(todo => todo.completed === completedStatus)\n  }\n)\n// highlight-end\n")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"\u8b66\u544a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u73b0\u5728\u5728\u4e24\u4e2a slice \u4e4b\u95f4\u6dfb\u52a0\u4e86\u4e00\u4e2a\u5bfc\u5165\u4f9d\u8d56\u5173\u7cfb\u2014\u2014",(0,i.kt)("inlineCode",{parentName:"p"},"todosSlice")," \u6b63\u5728\u4ece ",(0,i.kt)("inlineCode",{parentName:"p"},"filtersSlice")," \u5bfc\u5165\u4e00\u4e2a\u503c\u3002\u8fd9\u6837\u505a\u662f\u5408\u6cd5\u7684\uff0c\u4f46\u8981\u5c0f\u5fc3\u4f7f\u7528\u3002",(0,i.kt)("strong",{parentName:"p"},"\u5982\u679c\u4e24\u4e2a slice ",(0,i.kt)("em",{parentName:"strong"},"\u90fd")," \u5c1d\u8bd5\u4ece\u5f7c\u6b64\u5bfc\u5165\u67d0\u4e9b\u5185\u5bb9\uff0c\u5219\u6700\u7ec8\u4f1a\u4ea7\u751f\u201c\u5faa\u73af\u5bfc\u5165\u4f9d\u8d56\u201d\u95ee\u9898\uff0c\u4ece\u800c\u5bfc\u81f4\u4ee3\u7801\u5d29\u6e83"),"\u3002\u5982\u679c\u53d1\u751f\u8fd9\u79cd\u60c5\u51b5\uff0c\u8bf7\u5c1d\u8bd5\u5c06\u4e00\u4e9b\u901a\u7528\u4ee3\u7801\u79fb\u52a8\u5230\u5176\u81ea\u5df1\u7684\u6587\u4ef6\u4e2d\uff0c\u7136\u540e\u6539\u4e3a\u4ece\u8be5\u6587\u4ef6\u5bfc\u5165\u3002"))),(0,i.kt)("p",null,"\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u65b0\u7684 filtered todos selector \u4f5c\u4e3a\u53e6\u4e00\u4e2a selector \u7684\u8f93\u5165\uff0c\u8be5 selector \u8fd4\u56de\u8fd9\u4e9b todo \u7684 ID\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"export const selectFilteredTodoIds = createSelector(\n  // \u5c06\u5176\u4ed6\u7684 memoized selector \u4f5c\u4e3a\u8f93\u5165\u4f20\u9012\n  selectFilteredTodos,\n  // \u5e76\u5728 output selector \u4e2d\u5bfc\u51fa\u6570\u636e\n  filteredTodos => filteredTodos.map(todo => todo.id)\n)\n")),(0,i.kt)("p",null,"\u5982\u679c\u5207\u6362\u6210\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"<TodoList>")," \u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"selectFilteredTodoIds"),"\uff0c\u90a3\u4e48\u6211\u4eec\u5e94\u8be5\u80fd\u591f\u5c06\u51e0\u4e2a todo \u9879\u6807\u8bb0\u4e3a\u5df2\u5b8c\u6210\u72b6\u6001\uff1a"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Todo app - todos marked completed",src:n(3427).Z,width:"1200",height:"850"})),(0,i.kt)("p",null,"\u7136\u540e\u5207\u6362\u7b5b\u9009\u6761\u4ef6\u4e3a ",(0,i.kt)("em",{parentName:"p"},"\u53ea")," \u663e\u793a\u5df2\u5b8c\u6210\u72b6\u6001\u7684\u5217\u8868\uff1a"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Todo app - todos marked completed",src:n(5426).Z,width:"1200",height:"850"})),(0,i.kt)("p",null,"\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6269\u5c55 ",(0,i.kt)("inlineCode",{parentName:"p"},"selectFilteredTodos"),"\uff0c\u4ee5\u4fbf\u5728\u9009\u62e9\u9879\u4e2d\u4e5f\u5305\u62ec\u989c\u8272\u8fc7\u6ee4\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"export const selectFilteredTodos = createSelector(\n  // \u7b2c\u4e00\u4e2a input selector\uff1a\u6240\u6709 todo \u5217\u8868\n  selectTodos,\n  // \u7b2c\u4e8c\u4e2a input selector\uff1a\u6240\u6709\u8fc7\u6ee4\u5668\u503c\n  // highlight-next-line\n  state => state.filters,\n  // Output selector: \u63a5\u6536\u4e24\u4e2a\u503c\n  (todos, filters) => {\n    // highlight-start\n    const { status, colors } = filters\n    const showAllCompletions = status === StatusFilters.All\n    if (showAllCompletions && colors.length === 0) {\n      // highlight-end\n      return todos\n    }\n\n    // highlight-next-line\n    const completedStatus = status === StatusFilters.Completed\n    // \u6839\u636e\u8fc7\u6ee4\u5668\u8fd4\u56de\u672a\u5b8c\u6210\u6216\u5df2\u5b8c\u6210\u7684 todo \u5217\u8868\n    return todos.filter(todo => {\n      // highlight-start\n      const statusMatches =\n        showAllCompletions || todo.completed === completedStatus\n      const colorMatches = colors.length === 0 || colors.includes(todo.color)\n      return statusMatches && colorMatches\n      // highlight-end\n    })\n  }\n)\n")),(0,i.kt)("p",null,"\u8bf7\u6ce8\u610f\uff0c\u901a\u8fc7\u5c06\u903b\u8f91\u5c01\u88c5\u5728\u6b64\u9009\u62e9\u5668\u4e2d\uff0c\u5373\u4f7f\u66f4\u6539\u4e86\u7b5b\u9009\u884c\u4e3a\uff0c\u7ec4\u4ef6\u4e5f\u4e0d\u9700\u8981\u53d8\u66f4\u3002\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u6309\u72b6\u6001\u548c\u989c\u8272\u8fdb\u884c\u8fc7\u6ee4\uff1a"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Todo app - status and color filters",src:n(7518).Z,width:"1200",height:"850"})),(0,i.kt)("p",null,"\u6700\u540e\uff0c\u6211\u4eec\u7684\u4ee3\u7801\u4f1a\u5728\u51e0\u4e2a\u5730\u65b9\u68c0\u7d22 ",(0,i.kt)("inlineCode",{parentName:"p"},"state.todos"),"\u3002\u5728\u672c\u8282\u7684\u5176\u4f59\u90e8\u5206\uff0c\u6211\u4eec\u5c06\u5bf9\u8be5 state \u7684\u8bbe\u8ba1\u65b9\u5f0f\u8fdb\u884c\u4e00\u4e9b\u66f4\u6539\uff0c\u6211\u4eec\u5c06\u63d0\u53d6\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"selectTodos")," selector \u4ee5\u4fbf\u5728\u4efb\u4f55\u5730\u65b9\u4f7f\u7528\u3002\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c06 ",(0,i.kt)("inlineCode",{parentName:"p"},"selectTodoById")," \u79fb\u52a8\u5230 ",(0,i.kt)("inlineCode",{parentName:"p"},"todosSlice")," \u4e2d\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"export const selectTodos = state => state.todos\n\nexport const selectTodoById = (state, todoId) => {\n  return selectTodos(state).find(todo => todo.id === todoId)\n}\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u5b66\u4e60\u66f4\u591a\u5173\u4e8e\u4e3a\u4f55\u4f7f\u7528 selector \u51fd\u6570\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 Reselect \u7f16\u5199 memoized selectors\uff0c\u8bf7\u53c2\u9605\uff1a"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/usage/deriving-data-selectors"},"Using Redux: Deriving Data with Selectors"))))),(0,i.kt)("h2",{id:"\u5f02\u6b65\u8bf7\u6c42\u72b6\u6001"},"\u5f02\u6b65\u8bf7\u6c42\u72b6\u6001"),(0,i.kt)("p",null,"\u6211\u4eec\u4f7f\u7528\u5f02\u6b65 thunk \u4ece\u670d\u52a1\u5668\u83b7\u53d6 todo \u7684\u521d\u59cb\u5217\u8868\u3002\u7531\u4e8e\u6211\u4eec\u4f7f\u7528\u7684\u662f\u865a\u62df\u7684\u670d\u52a1\u5668 API\uff0c\u56e0\u6b64\u8be5\u54cd\u5e94\u4f1a\u7acb\u5373\u8fd4\u56de\u3002\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0cAPI \u8c03\u7528\u53ef\u80fd\u9700\u8981\u4e00\u6bb5\u65f6\u95f4\u624d\u80fd\u5b8c\u6210\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5728\u6211\u4eec\u7b49\u5f85\u54cd\u5e94\u5b8c\u6210\u8fc7\u7a0b\u4e2d\uff0c\u901a\u5e38\u4f1a\u663e\u793a\u67d0\u79cd loading spinner\u3002"),(0,i.kt)("p",null,"\u8fd9\u901a\u5e38\u5728 Redux \u5e94\u7528\u4e2d\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fdb\u884c\u5904\u7406\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528\u5177\u6709\u67d0\u79cd loading state \u503c\u6765\u8868\u793a\u8bf7\u6c42\u7684\u5f53\u524d\u72b6\u6001"),(0,i.kt)("li",{parentName:"ul"},"\u5728\u8fdb\u884c API \u8c03\u7528 ",(0,i.kt)("em",{parentName:"li"},"\u524d")," dispatch \u201crequest started\u201d action\uff0c\u8be5 dispatch \u4f1a\u66f4\u6539 loading state \u503c"),(0,i.kt)("li",{parentName:"ul"},"\u5728\u8bf7\u6c42\u5b8c\u6210\u65f6\u518d\u6b21\u66f4\u65b0 loading state \u503c\uff0c\u4ee5\u8868\u793a\u8c03\u7528\u5df2\u5b8c\u6210")),(0,i.kt)("p",null,"\u7136\u540e\uff0cUI \u5c42\u5728\u8bf7\u6c42\u8fc7\u7a0b\u4e2d\u663e\u793a loading spinner\uff0c\u5e76\u5728\u8bf7\u6c42\u5b8c\u6210\u65f6\u5207\u6362\u5230\u663e\u793a\u771f\u5b9e\u6570\u636e\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u5c06\u66f4\u65b0 todos slice \u4ee5\u8ddf\u8e2a loading state \u503c\uff0c\u5e76 dispatch \u4e00\u4e2a\u989d\u5916\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"'todos/todosLoading'")," action \u4f5c\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"fetchTodos")," thunk \u7684\u4e00\u90e8\u5206\u3002"),(0,i.kt)("p",null,"\u73b0\u5728\uff0ctodos reducer \u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"state")," \u53ea\u662f todos \u672c\u8eab\u7684\u6570\u7ec4\u3002\u5982\u679c\u6211\u4eec\u60f3\u8ddf\u8e2a todos slice \u4e2d\u7684 loading state\uff0c\u6211\u4eec\u9700\u8981\u5c06 todos state \u91cd\u65b0\u7ec4\u7ec7\u4e3a\u5177\u6709 todos \u6570\u7ec4 ",(0,i.kt)("em",{parentName:"p"},"\u548c"),"  loading state \u503c\u7684\u5bf9\u8c61\u3002\u8fd9\u4e5f\u610f\u5473\u7740\u91cd\u5199 reducer \u903b\u8f91\u4ee5\u5904\u7406\u989d\u5916\u7684\u5d4c\u5957\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"// highlight-start\nconst initialState = {\n  status: 'idle',\n  entities: []\n}\n// highlight-end\n\nexport default function todosReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'todos/todoAdded': {\n      // highlight-start\n      return {\n        ...state,\n        entities: [...state.entities, action.payload]\n      }\n      // highlight-end\n    }\n    case 'todos/todoToggled': {\n      // highlight-start\n      return {\n        ...state,\n        entities: state.entities.map(todo => {\n          if (todo.id !== action.payload) {\n            return todo\n          }\n\n          return {\n            ...todo,\n            completed: !todo.completed\n          }\n        })\n      }\n      // highlight-end\n    }\n    // \u7701\u7565\u5176\u4ed6 cases\n    default:\n      return state\n  }\n}\n\n// \u7701\u7565 action creators\n\n// highlight-next-line\nexport const selectTodos = state => state.todos.entities\n")),(0,i.kt)("p",null,"\u9700\u8981\u91cd\u70b9\u6ce8\u610f\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"todos \u6570\u7ec4\u73b0\u5728\u4f5c\u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"state.entities")," \u5d4c\u5957\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"todosReducer")," state \u5bf9\u8c61\u4e2d\u3002entities \u8fd9\u4e2a\u8bcd\u662f\u4e00\u4e2a\u672f\u8bed\uff0c\u610f\u601d\u662f\u201c\u5177\u6709 ID \u7684\u552f\u4e00\u9879\u201d\uff0c\u5b83\u786e\u5b9e\u63cf\u8ff0\u4e86 todo \u5bf9\u8c61\u3002"),(0,i.kt)("li",{parentName:"ul"},"\u8fd9\u4e5f\u610f\u5473\u7740\u6570\u7ec4\u5d4c\u5957\u5728 ",(0,i.kt)("em",{parentName:"li"},"\u6574\u4e2a")," Redux state \u5bf9\u8c61\u4e2d\uff0c\u4f5c\u4e3a ",(0,i.kt)("inlineCode",{parentName:"li"},"state.todos.entities")),(0,i.kt)("li",{parentName:"ul"},"\u6211\u4eec\u73b0\u5728\u5fc5\u987b\u5728 Reducer \u4e2d\u6267\u884c\u989d\u5916\u7684\u6b65\u9aa4\u6765\u590d\u5236\u989d\u5916\u7684\u5d4c\u5957\u7ea7\u522b\uff0c\u4ee5\u8fdb\u884c\u6b63\u786e\u7684\u4e0d\u53ef\u53d8\u66f4\u65b0\uff0c\u4f8b\u5982 ",(0,i.kt)("inlineCode",{parentName:"li"},"state")," \u5bf9\u8c61 -> ",(0,i.kt)("inlineCode",{parentName:"li"},"entities")," \u6570\u7ec4 -> ",(0,i.kt)("inlineCode",{parentName:"li"},"todo")," \u5bf9\u8c61"),(0,i.kt)("li",{parentName:"ul"},"\u7531\u4e8e\u4ee3\u7801\u7684\u5176\u4f59\u90e8\u5206\u662f ",(0,i.kt)("em",{parentName:"li"},"\u53ea")," \u901a\u8fc7 selectors \u8bbf\u95ee todos state\uff0c",(0,i.kt)("strong",{parentName:"li"},"\u6211\u4eec\u53ea\u9700\u8981\u66f4\u65b0 ",(0,i.kt)("inlineCode",{parentName:"strong"},"selectTodo")," selector"),"\u2014\u2014\u5373\u4f7f\u6211\u4eec\u91cd\u5851\u4e86 state\uff0cUI \u7684\u5176\u4f59\u90e8\u5206\u4ecd\u5c06\u7ee7\u7eed\u6309\u9884\u671f\u5de5\u4f5c\u3002")),(0,i.kt)("h3",{id:"loading-state-\u7684\u679a\u4e3e\u503c"},"Loading State \u7684\u679a\u4e3e\u503c"),(0,i.kt)("p",null,"\u4f60\u8fd8\u4f1a\u6ce8\u610f\u5230\uff0c\u6211\u4eec\u5df2\u5c06 loading state \u5b57\u6bb5\u5b9a\u4e49\u4e3a\u5b57\u7b26\u4e32\u679a\u4e3e\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"{\n  status: 'idle' // or: 'loading', 'succeeded', 'failed'\n}\n")),(0,i.kt)("p",null,"\u800c\u4e0d\u662f ",(0,i.kt)("inlineCode",{parentName:"p"},"isLoading")," \u5e03\u5c14\u503c\u3002"),(0,i.kt)("p",null,"\u5e03\u5c14\u503c\u5c06\u72b6\u6001\u9650\u5236\u4e3a\u4e24\u79cd\u53ef\u80fd\u6027\uff1a\u201c\u52a0\u8f7d\u201d\u6216\u201c\u672a\u52a0\u8f7d\u201d\u3002\u5b9e\u9645\u4e0a\uff0c",(0,i.kt)("strong",{parentName:"p"},"\u4e00\u4e2a\u8bf7\u6c42\u53ef\u80fd\u5904\u4e8e ",(0,i.kt)("em",{parentName:"strong"},"\u8bb8\u591a")," \u4e0d\u540c\u7684\u72b6\u6001"),"\uff0c\u4f8b\u5982\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u6839\u672c\u6ca1\u6709\u5f00\u59cb"),(0,i.kt)("li",{parentName:"ul"},"\u8fdb\u884c\u4e2d"),(0,i.kt)("li",{parentName:"ul"},"\u6210\u529f"),(0,i.kt)("li",{parentName:"ul"},"\u5931\u8d25"),(0,i.kt)("li",{parentName:"ul"},"\u6210\u529f\uff0c\u4f46\u53c8\u56de\u5230\u4e86\u6211\u4eec\u53ef\u80fd\u60f3\u8981\u91cd\u65b0\u83b7\u53d6\u72b6\u6001\u7684\u60c5\u51b5")),(0,i.kt)("p",null,"\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91\u4e5f\u53ef\u80fd\u53ea\u5e94\u57fa\u4e8e\u67d0\u4e9b actions \u5728\u7279\u5b9a states \u4e4b\u95f4\u8f6c\u6362\uff0c\u800c\u4f7f\u7528\u5e03\u5c14\u503c\u4f1a\u66f4\u96be\u5b9e\u73b0\u3002"),(0,i.kt)("p",null,"\u56e0\u6b64\uff0c\u6211\u4eec\u5efa\u8bae ",(0,i.kt)("strong",{parentName:"p"},"\u5c06 loading state \u5b58\u50a8\u4e3a\u5b57\u7b26\u4e32\u679a\u4e3e\u503c\uff0c\u800c\u4e0d\u662f\u5e03\u5c14\u503c"),"\u3002"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u6709\u5173\u4e3a\u4ec0\u4e48 loading state \u5e94\u4e3a\u679a\u4e3e\u503c\u7684\u8be6\u7ec6\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605\uff1a"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/style-guide/#treat-reducers-as-state-machines"},"Redux Style Guide: treat reducers as state machines"))))),(0,i.kt)("p",null,"\u5728\u6b64\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u5c06\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684 loading action\uff0c\u8be5 action \u4f1a\u5c06\u72b6\u6001\u8bbe\u7f6e\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"loading"),'\uff0c\u5e76\u66f4\u65b0 "loaded" action \u4ee5\u5c06 state \u6807\u5fd7\u91cd\u7f6e\u4e3a ',(0,i.kt)("inlineCode",{parentName:"p"},"idle"),"\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice.js"',title:'"src/features/todos/todosSlice.js"'},"const initialState = {\n  status: 'idle',\n  entities: []\n}\n\nexport default function todosReducer(state = initialState, action) {\n  switch (action.type) {\n    // \u7701\u7565\u5176\u4ed6 cases\n    // highlight-start\n    case 'todos/todosLoading': {\n      return {\n        ...state,\n        status: 'loading'\n      }\n    }\n    // highlight-end\n    case 'todos/todosLoaded': {\n      return {\n        ...state,\n        // highlight-next-line\n        status: 'idle',\n        entities: action.payload\n      }\n    }\n    default:\n      return state\n  }\n}\n\n// \u7701\u7565 action creators\n\n// Thunk \u51fd\u6570\nexport const fetchTodos = () => async dispatch => {\n  // highlight-next-line\n  dispatch(todosLoading())\n  const response = await client.get('/fakeApi/todos')\n  dispatch(todosLoaded(response.todos))\n}\n")),(0,i.kt)("p",null,"\u4f46\u662f\uff0c\u5728 UI \u4e2d\u663e\u793a loading state \u524d\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u865a\u62df\u670d\u52a1\u5668 API\uff0c\u6765\u7ed9 API \u8c03\u7528\u6dfb\u52a0\u4eba\u4e3a\u5ef6\u8fdf\u3002\u6253\u5f00 ",(0,i.kt)("inlineCode",{parentName:"p"},"src/api/server.js"),"\uff0c\u7136\u540e\u5728\u7b2c 63 \u884c\u5468\u56f4\u67e5\u627e\u88ab\u6ce8\u91ca\u6389\u7684\u884c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/api/server.js"',title:'"src/api/server.js"'},"new Server({\n  routes() {\n    this.namespace = 'fakeApi'\n    // highlight-next-line\n    // this.timing = 2000\n\n    // \u7701\u7565\u5176\u4ed6\u4ee3\u7801\n  }\n})\n")),(0,i.kt)("p",null,"\u5982\u679c\u4f60\u53d6\u6d88\u6ce8\u91ca\u8be5\u884c\uff0c\u865a\u62df\u670d\u52a1\u5668\u5c06\u4e3a\u5e94\u7528\u7a0b\u5e8f\u7684\u6bcf\u4e2a API \u8c03\u7528\u6dfb\u52a02\u79d2\u7684\u5ef6\u8fdf\uff0c\u8fd9\u4f7f\u6211\u4eec\u6709\u8db3\u591f\u7684\u65f6\u95f4\u770b\u5230\u6b63\u5728\u663e\u793a\u7684 loading spinner\u3002"),(0,i.kt)("p",null,"\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u8bfb\u53d6 ",(0,i.kt)("inlineCode",{parentName:"p"},"<TodoList>")," \u7ec4\u4ef6\u4e2d\u7684 loading state \u503c\uff0c\u5e76\u6839\u636e\u8be5\u503c\u663e\u793a loading spinner\u3002"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/TodoList.js"',title:'"src/features/todos/TodoList.js"'},'// \u7701\u7565 imports\n\nconst TodoList = () => {\n  const todoIds = useSelector(selectFilteredTodoIds)\n  // highlight-start\n  const loadingStatus = useSelector(state => state.todos.status)\n\n  if (loadingStatus === \'loading\') {\n    return (\n      <div className="todo-list">\n        <div className="loader" />\n      </div>\n    )\n  }\n  // highlight-end\n\n  const renderedListItems = todoIds.map(todoId => {\n    return <TodoListItem key={todoId} id={todoId} />\n  })\n\n  return <ul className="todo-list">{renderedListItems}</ul>\n}\n')),(0,i.kt)("p",null,"\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u6211\u4eec\u8fd8\u5e0c\u671b\u80fd\u5904\u7406 API \u5931\u8d25\u9519\u8bef\u548c\u5176\u4ed6\u6f5c\u5728\u60c5\u51b5\u3002"),(0,i.kt)("p",null,"\u4ee5\u4e0b\u662f\u542f\u7528\u52a0\u8f7d\u72b6\u6001\u540e\u5e94\u7528\u7684\u89c6\u56fe\uff08\u82e5\u8981\u518d\u6b21\u67e5\u770b spinner\uff0c\u8bf7\u91cd\u65b0\u52a0\u8f7d\u5e94\u7528\u9884\u89c8\u6216\u5728\u65b0\u9009\u9879\u5361\uff08tab\uff09\u4e2d\u6253\u5f00\u5b83\uff09\uff1a"),(0,i.kt)("iframe",{class:"codesandbox",src:"https://codesandbox.io/embed/github/reduxjs/redux-fundamentals-example-app/tree/checkpoint-7-asyncLoading/?fontsize=14&hidenavigation=1&theme=dark&runonclick=1",title:"redux-fundamentals-example-app",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,i.kt)("h2",{id:"flux-standard-actions"},"Flux Standard Actions"),(0,i.kt)("p",null,"\u5b9e\u9645\u4e0a Redux store \u672c\u8eab\u5e76\u4e0d\u5173\u5fc3\u4f60\u5728 action \u4e2d\u653e\u5165\u4e86\u54ea\u4e9b\u5b57\u6bb5\u3002\u5b83\u53ea\u5173\u5fc3 ",(0,i.kt)("inlineCode",{parentName:"p"},"action.type")," \u662f\u5426\u5b58\u5728\u5e76\u5177\u6709\u503c\uff0c\u5e76\u4e14\u5e38\u89c4\u7684 Redux action \u59cb\u7ec8\u4f7f\u7528\u5b57\u7b26\u4e32\u8868\u6765\u793a ",(0,i.kt)("inlineCode",{parentName:"p"},"action.type"),"\u3002\u8fd9\u610f\u5473\u7740\u4f60 ",(0,i.kt)("em",{parentName:"p"},"\u53ef\u4ee5")," \u5c06\u4efb\u4f55\u5176\u4ed6\u5b57\u6bb5\u653e\u5165\u6240\u9700\u7684 action \u4e2d\u3002\u4e5f\u8bb8\u6211\u4eec\u53ef\u4ee5\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"action.todo"),' \u6765\u8868\u793a "todo add" action\uff0c\u6216\u8005\u7528 ',(0,i.kt)("inlineCode",{parentName:"p"},"action.color")," \u6765\u8868\u793a\u67d0\u4e2a action\uff0c\u4f9d\u6b64\u7c7b\u63a8\u3002"),(0,i.kt)("p",null,"\u4f46\u662f\uff0c\u5982\u679c\u6bcf\u4e2a action \u5bf9\u5176\u6570\u636e\u5b57\u6bb5\u4f7f\u7528\u4e0d\u540c\u7684\u5b57\u6bb5\u540d\u79f0\uff0c\u5219\u5f88\u96be\u63d0\u524d\u77e5\u9053\u6bcf\u4e2a reducer \u4e2d\u9700\u8981\u5904\u7406\u54ea\u4e9b\u5b57\u6bb5\u3002"),(0,i.kt)("p",null,"\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48 Redux \u793e\u533a\u63d0\u51fa ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/redux-utilities/flux-standard-action#motivation"},"Flux Standard Actions \u7ea6\u5b9a"),"\uff08\u7b80\u79f0 FSA\uff09\u7684\u539f\u56e0\u3002\u8fd9\u662f\u6709\u5173\u5982\u4f55\u5728 action \u5bf9\u8c61\u5185\u90e8\u7ec4\u7ec7\u5b57\u6bb5\u7684\u5efa\u8bae\u65b9\u6cd5\uff0c\u4ee5\u4fbf\u5f00\u53d1\u4eba\u5458\u59cb\u7ec8\u77e5\u9053\u54ea\u4e9b\u5b57\u6bb5\u5305\u542b\u54ea\u4e9b\u7c7b\u578b\u7684\u6570\u636e\u3002FSA \u6a21\u5f0f\u5df2\u7ecf\u5728 Redux \u793e\u533a\u4e2d\u88ab\u5e7f\u6cdb\u4f7f\u7528\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u4f60\u5728\u6574\u4e2a\u6559\u7a0b\u4e2d\u90fd\u5728\u4f7f\u7528\u5b83\u3002"),(0,i.kt)("p",null,"FSA \u516c\u7ea6\u89c4\u5b9a\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c action \u5bf9\u8c61\u9700\u8981\u5305\u542b\u4efb\u4f55\u5b9e\u9645\u6570\u636e\uff0c\u5219\u6570\u636e\u503c\u5e94\u59cb\u7ec8\u653e\u5728 ",(0,i.kt)("inlineCode",{parentName:"li"},"action.payload")," \u4e2d"),(0,i.kt)("li",{parentName:"ul"},"action \u8fd8\u53ef\u4ee5\u5177\u6709\u5305\u542b\u989d\u5916\u63cf\u8ff0\u6027\u6570\u636e\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"action.meta")," \u5b57\u6bb5"),(0,i.kt)("li",{parentName:"ul"},"action \u4e5f\u53ef\u4ee5\u5177\u6709\u5305\u542b\u9519\u8bef\u4fe1\u606f\u7684 ",(0,i.kt)("inlineCode",{parentName:"li"},"action.error")," \u5b57\u6bb5")),(0,i.kt)("p",null,"\u6240\u4ee5\uff0c",(0,i.kt)("em",{parentName:"p"},"\u6240\u6709")," Redux actions \u5fc5\u987b\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u662f\u4e00\u4e2a\u666e\u901a\u7684 JS \u5bf9\u8c61"),(0,i.kt)("li",{parentName:"ul"},"\u5fc5\u987b\u6709 ",(0,i.kt)("inlineCode",{parentName:"li"},"type")," \u5b57\u6bb5")),(0,i.kt)("p",null,"\u5982\u679c\u4f60\u4f7f\u7528 FSA \u6a21\u5f0f\u7f16\u5199 action\uff0c\u5219 action \u53ef\u80fd\u4f1a\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u5305\u542b\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"li"},"payload")," \u5b57\u6bb5"),(0,i.kt)("li",{parentName:"ul"},"\u5305\u542b\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"li"},"error")," \u5b57\u6bb5"),(0,i.kt)("li",{parentName:"ul"},"\u5305\u542b\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"li"},"meta")," \u5b57\u6bb5")),(0,i.kt)(s.s,{title:"\u8be6\u7ec6\u8bf4\u660e\uff1aFSA \u548c\u9519\u8bef",mdxType:"DetailedExplanation"},(0,i.kt)("p",null,"FSA \u89c4\u8303\u89c4\u5b9a\uff1a"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\u5982\u679c action \u8868\u793a\u9519\u8bef\uff0c\u5219\u53ef\u9009\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"error")," \u5c5e\u6027\u53ef\u4ee5\u8bbe\u7f6e\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),"\u3002\n",(0,i.kt)("inlineCode",{parentName:"p"},"error")," \u4e3a true \u7684 action \u7c7b\u4f3c\u4e8e rejected Promise\u3002\u6309\u7167\u60ef\u4f8b\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"payload")," \u5e94\u8be5\u662f\u4e00\u4e2a\u9519\u8bef\u5bf9\u8c61\u3002\n\u5982\u679c ",(0,i.kt)("inlineCode",{parentName:"p"},"error")," \u5c5e\u6027\u9664 ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," \u4e4b\u5916\u8fd8\u6709\u4efb\u4f55\u5176\u4ed6\u503c\uff0c\u5305\u62ec ",(0,i.kt)("inlineCode",{parentName:"p"},"undefined")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"null"),"\uff0c\u5219\u8be5 action \u4e0d\u5f97\u89e3\u91ca\u4e3a\u9519\u8bef\u3002")),(0,i.kt)("p",null,"FSA \u89c4\u8303\u8fd8\u53cd\u5bf9\u4e3a loading succeeded \u548c loading failed \u4e4b\u7c7b\u7684\u5185\u5bb9\u63d0\u4f9b\u7279\u5b9a\u7684 action \u7c7b\u578b\u3002"),(0,i.kt)("p",null,"\u7136\u800c\uff0c\u5728\u5b9e\u8df5\u4e2d\uff0cRedux \u793e\u533a\u5ffd\u7565\u4e86\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"action.error")," \u4f5c\u4e3a\u5e03\u5c14\u6807\u8bc6\u7b26\u7684\u60f3\u6cd5\uff0c\u800c\u662f\u9009\u62e9\u4e86\u5355\u72ec\u7684 action \u7c7b\u578b\uff0c\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"todos/todosLoadingSucceeded")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"todos/todosLoadingFailed"),"\u3002\u8fd9\u662f\u56e0\u4e3a\u68c0\u67e5\u8fd9\u4e9b action \u7c7b\u578b\u6bd4\u9996\u5148\u5904\u7406 ",(0,i.kt)("inlineCode",{parentName:"p"},"todos/todosLoaded")," ",(0,i.kt)("em",{parentName:"p"},"\u518d")," \u68c0\u67e5 ",(0,i.kt)("inlineCode",{parentName:"p"},"if\uff08action.error\uff09")," \u8981\u5bb9\u6613\u5f97\u591a\u3002"),(0,i.kt)("p",null,"\u4f60\u53ef\u4ee5\u91c7\u7528\u4efb\u4f55\u4e00\u79cd\u66f4\u9002\u5408\u4f60\u7684\u65b9\u6cd5\uff0c\u4f46\u5927\u591a\u6570\u5e94\u7528\u4f7f\u7528\u5355\u72ec\u7684 action \u7c7b\u578b\u6765\u8868\u793a\u6210\u529f\u548c\u5931\u8d25\u3002")),(0,i.kt)("h2",{id:"\u89c4\u8303\u5316-state"},"\u89c4\u8303\u5316 State"),(0,i.kt)("p",null,"\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u6211\u4eec\u5df2\u5c06 todos \u4fdd\u5b58\u5728\u4e00\u4e2a\u6570\u7ec4\u4e2d\u3002\u8fd9\u662f\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u4ece\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684\u6570\u636e\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u7136\u540e\u8fd8\u9700\u8981\u904d\u5386 todos \u4ee5\u5728 UI \u4e2d\u5c06\u5b83\u4eec\u663e\u793a\u4e3a\u5217\u8868\u3002"),(0,i.kt)("p",null,"\u4f46\u662f\uff0c\u5728\u8f83\u5927\u7684 Redux \u5e94\u7528\u4e2d\uff0c\u901a\u5e38\u5c06\u6570\u636e\u5b58\u50a8\u5728",(0,i.kt)("strong",{parentName:"p"},"\u89c4\u8303\u5316 state \u7ed3\u6784"),"\u4e2d\u3002\u201c\u89c4\u8303\u5316\u201d\u662f\u6307\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u786e\u4fdd\u6bcf\u6761\u6570\u636e\u53ea\u6709\u4e00\u4e2a\u526f\u672c"),(0,i.kt)("li",{parentName:"ul"},"\u4ee5\u5141\u8bb8\u6309 ID \u76f4\u63a5\u67e5\u627e\u9879\u76ee\uff08items\uff09\u7684\u65b9\u5f0f\u5b58\u50a8\u9879\u76ee"),(0,i.kt)("li",{parentName:"ul"},"\u57fa\u4e8e ID \u5f15\u7528\u5176\u4ed6\u9879\u76ee\uff0c\u800c\u4e0d\u662f\u590d\u5236\u6574\u4e2a\u9879\u76ee")),(0,i.kt)("p",null,"\u4f8b\u5982\uff0c\u5728\u535a\u5ba2\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4f60\u53ef\u80fd\u5177\u6709\u6307\u5411 ",(0,i.kt)("inlineCode",{parentName:"p"},"User")," \u548c ",(0,i.kt)("inlineCode",{parentName:"p"},"Comment")," \u5bf9\u8c61\u7684 ",(0,i.kt)("inlineCode",{parentName:"p"},"Post")," \u5bf9\u8c61\u3002\u540c\u4e00\u4e2a\u4eba\u53ef\u80fd\u6709\u5f88\u591a\u5e16\u5b50\uff08Post\uff09\uff0c\u56e0\u6b64\uff0c\u5982\u679c\u6bcf\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"Post")," \u5bf9\u8c61\u90fd\u5305\u542b\u6574\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"User"),"\uff0c\u5c06\u4ea7\u751f\u540c\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"p"},"User")," \u5bf9\u8c61\u7684\u8bb8\u591a\u526f\u672c\u3002\u76f8\u53cd\uff0c\u82e5 ",(0,i.kt)("inlineCode",{parentName:"p"},"Post")," \u5bf9\u8c61\u7684\u7528\u6237 ID \u503c\u4e3a ",(0,i.kt)("inlineCode",{parentName:"p"},"post.user"),"\uff0c\u7136\u540e\u6211\u4eec\u5c31\u53ef\u4ee5\u6309 ID \u67e5\u627e ",(0,i.kt)("inlineCode",{parentName:"p"},"User")," \u5bf9\u8c61\uff0c\u5982 ",(0,i.kt)("inlineCode",{parentName:"p"},"state.users[post.user]"),"\u3002"),(0,i.kt)("p",null,"\u8fd9\u610f\u5473\u7740\u6211\u4eec\u901a\u5e38\u5c06\u6570\u636e\u7ec4\u7ec7\u4e3a\u5bf9\u8c61\u800c\u4e0d\u662f\u6570\u7ec4\uff0c\u5176\u4e2d\u9879\u76ee ID \u662f\u952e\uff0c\u9879\u76ee\u672c\u8eab\u662f\u503c\uff0c\u5982\u4e0b\u6240\u793a\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"const rootState = {\n  todos: {\n    status: 'idle',\n    // highlight-start\n    entities: {\n      2: { id: 2, text: 'Buy milk', completed: false },\n      7: { id: 7, text: 'Clean room', completed: true }\n    }\n    // highlight-end\n  }\n}\n")),(0,i.kt)("p",null,"\u8ba9\u6211\u4eec\u8f6c\u6362 todos slice\uff0c\u4ee5\u89c4\u8303\u5316\u7684\u5f62\u5f0f\u5b58\u50a8 todos\u3002\u8fd9\u9700\u8981\u5927\u6539 reducer \u7684\u903b\u8f91\uff0c\u5e76\u66f4\u65b0 selectors\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/todos/todosSlice"',title:'"src/features/todos/todosSlice"'},"const initialState = {\n  status: 'idle',\n  // highlight-next-line\n  entities: {}\n}\n\nexport default function todosReducer(state = initialState, action) {\n  switch (action.type) {\n    case 'todos/todoAdded': {\n      const todo = action.payload\n      // highlight-start\n      return {\n        ...state,\n        entities: {\n          ...state.entities,\n          [todo.id]: todo\n        }\n      }\n      // highlight-end\n    }\n    case 'todos/todoToggled': {\n      // highlight-start\n      const todoId = action.payload\n      const todo = state.entities[todoId]\n      return {\n        ...state,\n        entities: {\n          ...state.entities,\n          [todoId]: {\n            ...todo,\n            completed: !todo.completed\n          }\n        }\n      }\n      // highlight-end\n    }\n    case 'todos/colorSelected': {\n      // highlight-start\n      const { color, todoId } = action.payload\n      const todo = state.entities[todoId]\n      return {\n        ...state,\n        entities: {\n          ...state.entities,\n          [todoId]: {\n            ...todo,\n            color\n          }\n        }\n      }\n      // highlight-end\n    }\n    case 'todos/todoDeleted': {\n      // highlight-start\n      const newEntities = { ...state.entities }\n      delete newEntities[action.payload]\n      return {\n        ...state,\n        entities: newEntities\n      }\n      // highlight-end\n    }\n    case 'todos/allCompleted': {\n      // highlight-start\n      const newEntities = { ...state.entities }\n      Object.values(newEntities).forEach(todo => {\n        newEntities[todo.id] = {\n          ...todo,\n          completed: true\n        }\n      })\n      return {\n        ...state,\n        entities: newEntities\n      }\n      // highlight-end\n    }\n    case 'todos/completedCleared': {\n      // highlight-start\n      const newEntities = { ...state.entities }\n      Object.values(newEntities).forEach(todo => {\n        if (todo.completed) {\n          delete newEntities[todo.id]\n        }\n      })\n      return {\n        ...state,\n        entities: newEntities\n      }\n      // highlight-end\n    }\n    case 'todos/todosLoading': {\n      return {\n        ...state,\n        status: 'loading'\n      }\n    }\n    case 'todos/todosLoaded': {\n      // highlight-start\n      const newEntities = {}\n      action.payload.forEach(todo => {\n        newEntities[todo.id] = todo\n      })\n      return {\n        ...state,\n        status: 'idle',\n        entities: newEntities\n      }\n      // highlight-end\n    }\n    default:\n      return state\n  }\n}\n\n// \u7701\u7565 action creators\n\n// highlight-start\nconst selectTodoEntities = state => state.todos.entities\n\nexport const selectTodos = createSelector(selectTodoEntities, entities =>\n  Object.values(entities)\n)\n\nexport const selectTodoById = (state, todoId) => {\n  return selectTodoEntities(state)[todoId]\n}\n// highlight-end\n")),(0,i.kt)("p",null,"\u73b0\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"state.entities")," \u5b57\u6bb5\u662f\u4e00\u4e2a\u5bf9\u8c61\u800c\u4e0d\u662f\u6570\u7ec4\uff0c\u56e0\u6b64\u6211\u4eec\u5fc5\u987b\u4f7f\u7528\u5d4c\u5957\u5bf9\u8c61\u7684\u5c55\u5f00\u8fd0\u7b97\u7b26\u6765\u66f4\u65b0\u6570\u636e\u800c\u4e0d\u662f\u6570\u7ec4\u64cd\u4f5c\u3002\u6b64\u5916\uff0c\u6211\u4eec\u4e0d\u80fd\u50cf\u5faa\u73af\u6570\u7ec4\u90a3\u6837\u5faa\u73af\u8bbf\u95ee\u5bf9\u8c61\uff0c\u56e0\u6b64\u5728\u51e0\u4e2a\u5730\u65b9\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"Object.values(entities)")," \u6765\u83b7\u53d6 todo \u6570\u7ec4\uff0c\u4ee5\u4fbf\u6211\u4eec\u53ef\u4ee5\u5faa\u73af\u8bbf\u95ee\u5b83\u4eec\u3002"),(0,i.kt)("p",null,"\u597d\u6d88\u606f\u662f\uff0c\u7531\u4e8e\u6211\u4eec\u4f7f\u7528 selectors \u6765\u5c01\u88c5 state \u7684\u67e5\u627e\uff0c\u56e0\u6b64 UI \u4ecd\u7136\u4e0d\u5fc5\u66f4\u6539\u3002\u574f\u6d88\u606f\u662f\uff0creducer \u4ee3\u7801\u5b9e\u9645\u4e0a\u66f4\u957f\u3001\u66f4\u590d\u6742\u3002"),(0,i.kt)("p",null,"\u8fd9\u91cc\u7684\u90e8\u5206\u95ee\u9898\u662f",(0,i.kt)("strong",{parentName:"p"},"\u6b64 todo \u5e94\u7528\u7a0b\u5e8f\u793a\u4f8b\u4e0d\u662f\u5927\u578b\u5b9e\u9645\u5e94\u7528\u7a0b\u5e8f"),"\u3002\u56e0\u6b64\uff0c\u89c4\u8303\u5316 state \u5728\u6b64\u7279\u5b9a\u5e94\u7528\u4e2d\u6ca1\u6709\u90a3\u4e48\u6709\u7528\uff0c\u5e76\u4e14\u66f4\u96be\u770b\u5230\u6f5c\u5728\u7684\u597d\u5904\u3002"),(0,i.kt)("p",null,"\u5e78\u8fd0\u7684\u662f\uff0c\u5728",(0,i.kt)("a",{parentName:"p",href:"/tutorials/fundamentals/part-8-modern-redux"},"\u7b2c 8 \u8282\uff1a\u57fa\u4e8e Redux Toolkit \u7684\u73b0\u4ee3\u5316 Redux")," \u4e2d\uff0c\u6211\u4eec\u5c06\u770b\u5230\u4e00\u4e9b\u65b9\u6cd5\u6765\u5927\u5927\u7f29\u77ed\u7528\u4e8e\u7ba1\u7406\u89c4\u8303\u5316 state \u7684 reducer \u903b\u8f91\u3002"),(0,i.kt)("p",null,"\u76ee\u524d\uff0c\u8981\u4e86\u89e3\u7684\u91cd\u8981\u4e8b\u9879\u662f\uff1a"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\u89c4\u8303\u5316\u5728 Redux \u5e94\u7528\u4e2d ",(0,i.kt)("em",{parentName:"li"},"\u5f88")," \u5e38\u7528"),(0,i.kt)("li",{parentName:"ul"},"\u4e3b\u8981\u597d\u5904\u662f\u80fd\u591f\u901a\u8fc7 ID \u67e5\u627e\u5355\u4e2a\u9879\u76ee\uff0c\u5e76\u786e\u4fdd state \u4e2d\u4ec5\u5b58\u5728\u9879\u76ee\u7684\u4e00\u4e2a\u526f\u672c")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u6709\u5173\u89c4\u8303\u5316\u4e3a\u4f55\u5bf9 Redux \u6709\u7528\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/usage/structuring-reducers/normalizing-state-shape"},"\u7ed3\u6784\u5316 Reducers\uff1a\u89c4\u8303\u5316 State"))))),(0,i.kt)("h2",{id:"thunks-\u548c-promises"},"Thunks \u548c Promises"),(0,i.kt)("p",null,"\u5bf9\u4e8e\u672c\u8282\uff0c\u6211\u4eec\u8fd8\u6709\u6700\u540e\u4e00\u4e2a\u6a21\u5f0f\u8981\u770b\u3002\u6211\u4eec\u5df2\u7ecf\u4e86\u89e3\u4e86\u5982\u4f55\u57fa\u4e8e dispatch action \u5728 Redux store \u4e2d\u5904\u7406 loading state\u3002\u5982\u679c\u6211\u4eec\u9700\u8981\u67e5\u770b\u7ec4\u4ef6\u4e2d thunk \u7684\u7ed3\u679c\uff0c\u8be5\u600e\u4e48\u529e\uff1f"),(0,i.kt)("p",null,"\u6bcf\u5f53\u4f60\u8c03\u7528 ",(0,i.kt)("inlineCode",{parentName:"p"},"store.dispatch(action)")," \u65f6\uff0c",(0,i.kt)("inlineCode",{parentName:"p"},"dispatch")," \u5b9e\u9645\u4e0a\u4f1a\u8fd4\u56de ",(0,i.kt)("inlineCode",{parentName:"p"},"action")," \u4f5c\u4e3a\u5176\u7ed3\u679c\u3002\u7136\u540e\uff0cmiddleware \u53ef\u4ee5\u4fee\u6539\u8be5\u884c\u4e3a\u5e76\u8fd4\u56de\u4e00\u4e9b\u5176\u4ed6\u503c\u3002"),(0,i.kt)("p",null,"\u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0cRedux Thunk middleware \u5141\u8bb8\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u7ed9 ",(0,i.kt)("inlineCode",{parentName:"p"},"dispatch"),"\uff0c\u8c03\u7528\u8be5\u51fd\u6570\uff0c\u7136\u540e\u8fd4\u56de\u7ed3\u679c\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="reduxThunkMiddleware.js"',title:'"reduxThunkMiddleware.js"'},"const reduxThunkMiddleware = storeAPI => next => action => {\n  // \u5982\u679c action \u662f\u4e00\u4e2a\u51fd\u6570\n  if (typeof action === 'function') {\n    // \u8c03\u7528\u51fd\u6570\u5e76\u5c06 `dispatch` \u548c `getState` \u4f5c\u4e3a\u53c2\u6570\u4f20\u9012\n    // \u6b64\u5916\uff0c\u8fd4\u56de thunk \u51fd\u6570\u8fd4\u56de\u7684\u4efb\u4f55\u5185\u5bb9\n    return action(storeAPI.dispatch, storeAPI.getState)\n  }\n\n  // \u5426\u5219\uff0c\u8fd9\u662f\u666e\u901a\u7684 action\u2014\u2014\u7ee7\u7eed\u53d1\u9001\n  return next(action)\n}\n")),(0,i.kt)("p",null,"\u8fd9\u610f\u5473\u7740",(0,i.kt)("strong",{parentName:"p"},"\u6211\u4eec\u53ef\u4ee5\u7f16\u5199\u8fd4\u56de promise \u7684 thunk \u51fd\u6570\uff0c\u5e76\u5728\u7ec4\u4ef6\u4e2d\u7b49\u5f85 promise \u72b6\u6001\u53d8\u5316"),"\u3002"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"<Header>")," \u7ec4\u4ef6\u5df2\u7ecf dispatch \u4e86\u4e00\u4e2a thunk\uff0c\u7528\u4e8e\u5c06\u65b0\u7684 todo \u6761\u76ee\u4fdd\u5b58\u5230\u670d\u52a1\u5668\u3002\u8ba9\u6211\u4eec\u5728 ",(0,i.kt)("inlineCode",{parentName:"p"},"<Header>")," \u7ec4\u4ef6\u4e2d\u6dfb\u52a0\u4e00\u4e9b\u52a0\u8f7d\u72b6\u6001\uff0c\u7136\u540e\u5728\u7b49\u5f85\u670d\u52a1\u5668\u54cd\u5e94\u65f6\u7981\u7528\u6587\u672c\u8f93\u5165\u5e76\u663e\u793a\u53e6\u4e00\u4e2a loading spinner\uff1a"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="src/features/header/Header.js"',title:'"src/features/header/Header.js"'},"const Header = () => {\n  const [text, setText] = useState('')\n  // highlight-next-line\n  const [status, setStatus] = useState('idle')\n  const dispatch = useDispatch()\n\n  const handleChange = e => setText(e.target.value)\n\n  // highlight-start\n  const handleKeyDown = async e => {\n    // \u5982\u679c\u7528\u6237\u6309\u4e0b Enter \u952e\n    const trimmedText = text.trim()\n    if (e.which === 13 && trimmedText) {\n      // \u521b\u5efa\u5e76 dispatch thunk \u51fd\u6570\u672c\u8eab\n      setStatus('loading')\n      // \u7b49\u5f85 saveNewTodo \u8fd4\u56de\u7684 promise\n      await dispatch(saveNewTodo(trimmedText))\n      // \u6e05\u9664\u6587\u672c\u8f93\u5165\n      setText('')\n      setStatus('idle')\n    }\n  }\n\n  let isLoading = status === 'loading'\n  let placeholder = isLoading ? '' : 'What needs to be done?'\n  let loader = isLoading ? <div className=\"loader\" /> : null\n  // highlight-end\n\n  return (\n    <header className=\"header\">\n      <input\n        className=\"new-todo\"\n        placeholder={placeholder}\n        autoFocus={true}\n        value={text}\n        onChange={handleChange}\n        onKeyDown={handleKeyDown}\n        // highlight-next-line\n        disabled={isLoading}\n      />\n      // highlight-next-line\n      {loader}\n    </header>\n  )\n}\n\nexport default Header\n")),(0,i.kt)("p",null,"\u73b0\u5728\uff0c\u5982\u679c\u6dfb\u52a0\u4e00\u4e2a todo\uff0c\u6211\u4eec\u5c06\u5728\u6807\u9898\u4e2d\u770b\u5230\u4e00\u4e2a spinner\uff1a"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Todo app - component loading spinner",src:n(2742).Z,width:"1200",height:"850"})),(0,i.kt)("h2",{id:"\u4f60\u7684\u6240\u5b66"},"\u4f60\u7684\u6240\u5b66"),(0,i.kt)("p",null,"\u5982\u4f60\u6240\u89c1\uff0c\u5728 Redux \u5e94\u7528\u4e2d\u5e7f\u6cdb\u4f7f\u7528\u7684\u8fd8\u6709\u5176\u4ed6\u51e0\u79cd\u6a21\u5f0f\u3002\u8fd9\u4e9b\u6a21\u5f0f\u4e0d\u662f\u5fc5\u9700\u7684\uff0c\u6700\u521d\u53ef\u80fd\u6d89\u53ca\u7f16\u5199\u66f4\u591a\u4ee3\u7801\uff0c\u4f46\u540c\u65f6\u63d0\u4f9b\u4e86\u4e00\u4e9b\u597d\u5904\uff0c\u4f8b\u5982\u4f7f\u903b\u8f91\u53ef\u91cd\u7528\u3001\u5c01\u88c5\u5b9e\u73b0\u7ec6\u8282\u3001\u63d0\u9ad8\u5e94\u7528\u6027\u80fd\u4ee5\u53ca\u4f7f\u67e5\u627e\u6570\u636e\u66f4\u5bb9\u6613\u3002"),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\u63d0\u793a")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"\u6709\u5173\u8fd9\u4e9b\u6a21\u5f0f\u5b58\u5728\u7684\u539f\u56e0\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 Redux \u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a"),(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-1/"},"Idiomatic Redux: The Tao of Redux, Part 1 - Implementation and Intent")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-2/"},"Idiomatic Redux: The Tao of Redux, Part 2 - Practice and Philosophy"))))),(0,i.kt)("p",null,"\u4ee5\u4e0b\u662f\u6211\u4eec\u7684\u5e94\u7528\u5728\u5b8c\u5168\u8f6c\u6362\u4e3a\u4f7f\u7528\u8fd9\u4e9b\u6a21\u5f0f\u540e\u7684\u6837\u5b50\uff1a"),(0,i.kt)("iframe",{class:"codesandbox",src:"https://codesandbox.io/embed/github/reduxjs/redux-fundamentals-example-app/tree/checkpoint-8-normalizedState/?fontsize=14&hidenavigation=1&theme=dark&runonclick=1",title:"redux-fundamentals-example-app",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"}),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"\u603b\u7ed3")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("ul",{parentName:"div"},(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Action creators \u51fd\u6570\u53ef\u4ee5\u5c01\u88c5\u5173\u4e8e action \u5bf9\u8c61\u548c thunks \u7684\u903b\u8f91"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Action creators \u53ef\u4ee5\u63a5\u53d7\u53c2\u6570\u5e76\u5305\u542b\u8bbe\u7f6e\u903b\u8f91\uff0c\u5e76\u8fd4\u56de\u6700\u7ec8\u7684 action \u5bf9\u8c61\u6216 thunk \u51fd\u6570"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u8bb0\u5fc6\u5316\uff08memoized\uff09selectors \u6709\u52a9\u4e8e\u63d0\u9ad8 Redux \u5e94\u7528\u6027\u80fd"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Reselect \u6709\u4e00\u4e2a ",(0,i.kt)("inlineCode",{parentName:"li"},"createSelector")," API \u53ef\u4ee5\u751f\u6210\u8bb0\u5fc6\u5316\uff08memoized\uff09selectors"),(0,i.kt)("li",{parentName:"ul"},"\u5982\u679c\u7ed9\u8bb0\u5fc6\u5316\uff08memoized\uff09selectors \u4f20\u5165\u76f8\u540c\u7684\u53c2\u6570\uff0c\u5c06\u8fd4\u56de\u76f8\u540c\u7684\u7ed3\u679c\uff08\u5f15\u7528\uff09"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u8bf7\u6c42\u72b6\u6001\u5e94\u5b58\u50a8\u4e3a\u679a\u4e3e\u503c\uff0c\u800c\u4e0d\u662f\u5e03\u5c14\u503c"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,i.kt)("inlineCode",{parentName:"li"},"idle")," \u548c ",(0,i.kt)("inlineCode",{parentName:"li"},"loading")," \u7b49\u679a\u4e3e\u6709\u52a9\u4e8e\u4e00\u81f4\u5730\u8ddf\u8e2a\u72b6\u6001"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Flux Standard Actions \u662f\u7ba1\u7406 action \u5bf9\u8c61\u516c\u8ba4\u7684\u7ea6\u5b9a"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u5728 Actions \u91cc\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"payload")," \u8868\u793a\u6570\u636e\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"meta")," \u8868\u793a\u989d\u5916\u7684\u63cf\u8ff0\uff0c",(0,i.kt)("inlineCode",{parentName:"li"},"error")," \u8868\u793a\u9519\u8bef\u4fe1\u606f"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"\u89c4\u8303\u5316 state \u4f7f\u6309 ID \u67e5\u627e\u9879\u76ee\u53d8\u5f97\u66f4\u52a0\u5bb9\u6613"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u89c4\u8303\u5316\u6570\u636e\u5b58\u50a8\u5728\u5bf9\u8c61\u800c\u4e0d\u662f\u6570\u7ec4\u4e2d\uff0c\u4ee5\u9879\u76ee ID \u4f5c\u4e3a\u952e"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Thunks \u53ef\u4ee5\u4ece ",(0,i.kt)("inlineCode",{parentName:"strong"},"dispatch")," \u4e2d\u8fd4\u56de promise"),(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u5185\u53ef\u4ee5\u7b49\u5f85\u5f02\u6b65 thunks \u5b8c\u6210\u540e\u518d\u5904\u7406\u4e00\u4e9b\u903b\u8f91")))))),(0,i.kt)("h2",{id:"\u4e0b\u4e00\u6b65"},"\u4e0b\u4e00\u6b65"),(0,i.kt)("p",null,"\u201c\u624b\u52a8\u201d\u7f16\u5199\u8fd9\u4e9b\u4ee3\u7801\u53ef\u80fd\u65e2\u8017\u65f6\u53c8\u56f0\u96be\u3002",(0,i.kt)("strong",{parentName:"p"},"\u8fd9\u5c31\u662f\u6211\u4eec\u63a8\u8350\u4f60\u7528 ",(0,i.kt)("a",{parentName:"strong",href:"https://redux-toolkit.js.org"},"Redux Toolkit")," \u5b98\u65b9\u5e93\u53bb\u5199 Redux \u903b\u8f91\u7684\u539f\u56e0"),"\u3002"),(0,i.kt)("p",null,"Redux Toolkit \u5305\u542b\u7684 API \u53ef\u4ee5",(0,i.kt)("strong",{parentName:"p"},"\u5e2e\u52a9\u4f60\u4f7f\u7528\u66f4\u5c11\u7684\u4ee3\u7801\u6765\u7f16\u5199\u6240\u6709\u5178\u578b\u7684 Redux \u4f7f\u7528\u6a21\u5f0f"),"\u3002\u5b83\u8fd8\u6709\u52a9\u4e8e",(0,i.kt)("strong",{parentName:"p"},"\u9632\u6b62\u5e38\u89c1\u9519\u8bef"),"\uff0c\u4f8b\u5982\u610f\u5916\u6539\u53d8 state\u3002"),(0,i.kt)("p",null,"\u5728",(0,i.kt)("a",{parentName:"p",href:"/tutorials/fundamentals/part-8-modern-redux"},"\u7b2c 8 \u8282\uff1a\u73b0\u4ee3\u5316 Redux"),"\uff0c\u6211\u4eec\u5c06\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 Redux Toolkit \u6765\u7b80\u5316\u8fc4\u4eca\u4e3a\u6b62\u7f16\u5199\u7684\u6240\u6709\u4ee3\u7801\u3002"))}k.isMDXComponent=!0},2742:function(t,e,n){e.Z=n.p+"assets/images/todos-app-headerLoading-9b4bca9cb4675bf35df09a2e709ecccb.png"},3427:function(t,e,n){e.Z=n.p+"assets/images/todos-app-markedCompleted-fe1ddaba1c85e3f9841728d39459d126.png"},7518:function(t,e,n){e.Z=n.p+"assets/images/todos-app-selectorFilters-9ebfc37b389c997e011aff74d525a1aa.png"},5426:function(t,e,n){e.Z=n.p+"assets/images/todos-app-showCompleted-6eeff512e106457fd4fb469d2f66337d.png"}}]);